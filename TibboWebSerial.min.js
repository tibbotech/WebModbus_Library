!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("TibboWebSerial",[],e):"object"==typeof exports?exports.TibboWebSerial=e():t.TibboWebSerial=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";var n=r(1),i=n(r(2)),o=n(r(5)),a=n(r(6)),u=n(r(7)),s=0,c=1,f=7,l=8,h=13,d=20,p=30,v={DTR:1,RTS:2,CTS:16,DSR:32,RI:64,DCD:128},y={OFF:[0,0,0,0],CTS_RTS:[8,144,0,0],XON_XOFF:[0,19,400,400]},m={index:4,value:17},g={index:5,value:19},w=new TextDecoder,x="",b=function(){function t(e,r){(0,a.default)(this,t),this.usb=e,this.requestTimedOut=!1,this.modemState=null,this.DTR=null,this.RTS=null,this.CTS=null,this.DSR=null,this.RI=null,this.DCD=null,this.modemStateChanged=void 0,this.getFlowControlCallback=void 0,this.flowControlChanged=void 0,this.baudChangeOK=void 0,this.serDataArrival=void 0,this.serDataSent=void 0,this.connectFail=void 0,this.connectOK=void 0,this.disconnectOK=void 0,this.connectionError=void 0,this.autoReadData=void 0===r||void 0===r.autoReadData||r.autoReadData,this.flowControl=void 0!==r&&void 0!==r.flowControl?r.flowControl:"OFF",this.baud=void 0!==r&&void 0!==r.baud?r.baud:38400,this.encoding=void 0!==r&&void 0!==r.encoding?r.encoding:""}return(0,u.default)(t,[{key:"connect",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.usb.open();case 3:return t.next=5,this.usb.selectConfiguration(1);case 5:return t.next=7,this.usb.claimInterface(0);case 7:return t.next=9,this.enable();case 9:return t.next=11,this.setBaud(this.baud);case 11:return t.next=13,this.setFlowControl(this.flowControl);case 13:this.setTimers(),this.connectOK&&this.connectOK(),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),this.connectFail&&this.connectFail();case 20:case"end":return t.stop()}},t,this,[[0,17]])}));return function(){return t.apply(this,arguments)}}()},{key:"enable",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:s,index:0,value:1});case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setTimers",value:function(){void 0!==this.dataTimer&&clearInterval(this.dataTimer),this.dataTimer=setInterval(this.readTimer.bind(this),1),this.canRead=!0,void 0!==this.modemStateTimer&&clearInterval(this.modemStateTimer),this.modemStateTimer=setInterval(this.getModemState.bind(this,this.usb),1)}},{key:"disconnect",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return clearInterval(this.dataTimer),clearInterval(this.modemStateTimer),t.next=4,this.usb.close();case 4:this.disconnectOK&&this.disconnectOK();case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"updateModemState",value:function(t){this.modemState=t,this.DTR=(t&v.DTR)>0?1:0,this.RTS=(t&v.RTS)>0?1:0,this.CTS=(t&v.CTS)>0?1:0,this.DSR=(t&v.DSR)>0?1:0,this.RI=(t&v.RI)>0?1:0,this.DCD=(t&v.DCD)>0?1:0}},{key:"setBaud",value:function(){var t=(0,o.default)(i.default.mark(function t(e){var r,n,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(this.baud=e,r=[0,0,0,0],n=0;n<r.length;n++)o=255&e,r[n]=o,e=(e-o)/256;return t.next=5,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:p,index:0,value:0},new Uint8Array(r));case 5:this.baudChangeOK&&this.baudChangeOK(this.baud);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"initializeSpecialCharacters",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.setChar(g.index,g.value),this.setChar(m.index,m.value);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setChar",value:function(){var t=(0,o.default)(i.default.mark(function t(e,r){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:h,index:0,value:e<<8&65280|r});case 2:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"setMHS",value:function(){var t=(0,o.default)(i.default.mark(function t(e){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:f,index:0,value:768|e});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"getBaud",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferIn({requestType:"vendor",recipient:"device",request:c,index:0,value:0},1);case 2:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getModemState",value:function(){var t=(0,o.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferIn({requestType:"vendor",recipient:"device",request:l,index:0,value:0},1);case 2:(e=(e=t.sent).data.getInt8())!==this.modemState&&(this.updateModemState(e),this.modemStateChanged&&this.modemStateChanged(this.DTR,this.RTS,this.CTS,this.DSR,this.RI,this.DCD));case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getFlowControl",value:function(){var t=(0,o.default)(i.default.mark(function t(){var e,r,n,o;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.controlTransferIn({requestType:"vendor",recipient:"device",request:d,index:0,value:0},16);case 2:for(e=t.sent,r=new Int32Array(e.data.buffer),r=JSON.stringify(Array.from(r)),n=Object.entries(y),o=0;o<n.length;o++)JSON.stringify(n[o][1])===r&&this.getFlowControlCallback&&this.getFlowControlCallback(n[o][0]);case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"setFlowControl",value:function(){var t=(0,o.default)(i.default.mark(function t(e){var r;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=y[e],t.next=3,this.usb.controlTransferOut({requestType:"vendor",recipient:"device",request:19,index:0,value:0},new Int32Array(r));case 3:this.flowControlChanged&&this.flowControlChanged(e);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"write",value:function(){var t=(0,o.default)(i.default.mark(function t(e){var r,n;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(new Uint8Array,n=new TextEncoder,!((r=n.encode(e)).length>0)){t.next=7;break}return t.next=6,this.usb.transferOut(2,r);case 6:this.serDataSent&&this.serDataSent(e);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"toggleLINE",value:function(){var t=(0,o.default)(i.default.mark(function t(e){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setMHS(e^this.modemState);case 2:console.log("Line toggled");case 3:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"read",value:function(){var t=(0,o.default)(i.default.mark(function t(){return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:""!==x&&(this.serDataArrival(x),x="");case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"autoRead",value:function(){var t=(0,o.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.usb.transferIn(2,64);case 2:return e=t.sent,t.abrupt("return",new Uint8Array(e.data.buffer));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"readTimer",value:function(){var t=(0,o.default)(i.default.mark(function t(){var e;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.canRead||null==this.usb){t.next=13;break}return this.canRead=!1,t.prev=2,t.next=5,this.autoRead();case 5:(e=t.sent)&&("UTF8"===this.encoding&&(e=w.decode(e)),"HEX"===this.encoding&&(e=this.byteToHexString(e)),void 0!==this.serDataArrival&&(this.autoReadData?this.serDataArrival(e):x+=e)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),"NotFoundError"===t.t0.name&&8===t.t0.code&&t.t0.message.indexOf("disconnected")>=0&&(clearInterval(this.dataTimer),clearInterval(this.modemStateTimer),this.connectionError&&this.connectionError());case 12:this.canRead=!0;case 13:case"end":return t.stop()}},t,this,[[2,9]])}));return function(){return t.apply(this,arguments)}}()},{key:"byteToHexString",value:function(t){if(!t)return"";for(var e="",r=0;r<t.length;r++){var n=(255&t[r]).toString(16);e+=n=1===n.length?"0"+n:n}return e.toUpperCase()}}]),t}();t.exports={Serial:b,LINE_STATES:v,FLOW_CONTROL:y}},function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){t.exports=r(3)},function(t,e,r){var n=function(){return this}()||Function("return this")(),i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,t.exports=r(4),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(t){n.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var r,n=Object.prototype,i=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",c="object"==typeof t,f=e.regeneratorRuntime;if(f)c&&(t.exports=f);else{(f=e.regeneratorRuntime=c?t.exports:{}).wrap=x;var l="suspendedStart",h="suspendedYield",d="executing",p="completed",v={},y={};y[a]=function(){return this};var m=Object.getPrototypeOf,g=m&&m(m(_([])));g&&g!==n&&i.call(g,a)&&(y=g);var w=k.prototype=T.prototype=Object.create(y);S.prototype=w.constructor=k,k.constructor=S,k[s]=S.displayName="GeneratorFunction",f.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},f.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,k):(t.__proto__=k,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(w),t},f.awrap=function(t){return{__await:t}},O(C.prototype),C.prototype[u]=function(){return this},f.AsyncIterator=C,f.async=function(t,e,r,n){var i=new C(x(t,e,r,n));return f.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},O(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},f.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},f.values=_,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return u.type="throw",u.arg=t,e.next=n,i&&(e.method="next",e.arg=r),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;D(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),v}}}function x(t,e,r,n){var i=e&&e.prototype instanceof T?e:T,o=Object.create(i.prototype),a=new E(n||[]);return o._invoke=function(t,e,r){var n=l;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===i)throw o;return I()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var u=R(a,r);if(u){if(u===v)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var s=b(t,e,r);if("normal"===s.type){if(n=r.done?p:h,s.arg===v)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=p,r.method="throw",r.arg=s.arg)}}}(t,r,a),o}function b(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}function T(){}function S(){}function k(){}function O(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function C(t){var e;this._invoke=function(r,n){function o(){return new Promise(function(e,o){!function e(r,n,o,a){var u=b(t[r],t,n);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){s.value=t,o(s)},a)}a(u.arg)}(r,n,e,o)})}return e=e?e.then(o,o):o()}}function R(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,R(t,e),"throw"===e.method))return v;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=b(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,v;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,v):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,v)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function _(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(i.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=r,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e){function r(t,e,r,n,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void r(t)}u.done?e(s):Promise.resolve(s).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function u(t){r(a,i,o,u,s,"next",t)}function s(t){r(a,i,o,u,s,"throw",t)}u(void 0)})}}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9UaWJib1dlYlNlcmlhbC93ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCJ3ZWJwYWNrOi8vVGliYm9XZWJTZXJpYWwvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vVGliYm9XZWJTZXJpYWwvLi9zcmMvU2VyaWFsLmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL3JlZ2VuZXJhdG9yL2luZGV4LmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS1tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vVGliYm9XZWJTZXJpYWwvLi9ub2RlX21vZHVsZXMvcmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvYXN5bmNUb0dlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9UaWJib1dlYlNlcmlhbC8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzIiwid2VicGFjazovL1RpYmJvV2ViU2VyaWFsLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiQ09OVFJPTF9DT01NQU5EUyIsIkxJTkVfU1RBVEVTIiwiRFRSIiwiUlRTIiwiQ1RTIiwiRFNSIiwiUkkiLCJEQ0QiLCJGTE9XX0NPTlRST0wiLCJPRkYiLCJDVFNfUlRTIiwiWE9OX1hPRkYiLCJTUEVDSUFMX0NIQVJBQ1RFUlMiLCJpbmRleCIsIkRFQ09ERVIiLCJUZXh0RGVjb2RlciIsImJ1ZmZlcmVkRGF0YSIsIlNlcmlhbCIsImRldmljZSIsIm9wdGlvbnMiLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGVmYXVsdCIsInVzYiIsInJlcXVlc3RUaW1lZE91dCIsIm1vZGVtU3RhdGUiLCJtb2RlbVN0YXRlQ2hhbmdlZCIsInVuZGVmaW5lZCIsImdldEZsb3dDb250cm9sQ2FsbGJhY2siLCJmbG93Q29udHJvbENoYW5nZWQiLCJiYXVkQ2hhbmdlT0siLCJzZXJEYXRhQXJyaXZhbCIsInNlckRhdGFTZW50IiwiY29ubmVjdEZhaWwiLCJjb25uZWN0T0siLCJkaXNjb25uZWN0T0siLCJjb25uZWN0aW9uRXJyb3IiLCJhdXRvUmVhZERhdGEiLCJmbG93Q29udHJvbCIsImJhdWQiLCJlbmNvZGluZyIsIm9wZW4iLCJzZWxlY3RDb25maWd1cmF0aW9uIiwiY2xhaW1JbnRlcmZhY2UiLCJlbmFibGUiLCJzZXRCYXVkIiwic2V0Rmxvd0NvbnRyb2wiLCJzZXRUaW1lcnMiLCJjb250cm9sVHJhbnNmZXJPdXQiLCJyZXF1ZXN0VHlwZSIsInJlY2lwaWVudCIsInJlcXVlc3QiLCJkYXRhVGltZXIiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJyZWFkVGltZXIiLCJjYW5SZWFkIiwibW9kZW1TdGF0ZVRpbWVyIiwiZ2V0TW9kZW1TdGF0ZSIsImNsb3NlIiwiYXJyIiwibGVuZ3RoIiwiYnl0ZSIsIlVpbnQ4QXJyYXkiLCJzZXRDaGFyIiwiU3BlY2lhbENoYXJhY3RlckluZGV4IiwiU3BlY2lhbENoYXJhY3RlclZhbHVlIiwiY29udHJvbFRyYW5zZmVySW4iLCJyZXN1bHQiLCJkYXRhIiwiZ2V0SW50OCIsInVwZGF0ZU1vZGVtU3RhdGUiLCJJbnQzMkFycmF5IiwiYnVmZmVyIiwiSlNPTiIsInN0cmluZ2lmeSIsIkFycmF5IiwiZnJvbSIsImVudHJpZXMiLCJlbmMiLCJUZXh0RW5jb2RlciIsImEiLCJlbmNvZGUiLCJ0cmFuc2Zlck91dCIsImxpbmUiLCJzZXRNSFMiLCJjb25zb2xlIiwibG9nIiwidHJhbnNmZXJJbiIsImF1dG9SZWFkIiwiZGVjb2RlIiwiYnl0ZVRvSGV4U3RyaW5nIiwiX2NvbnRleHQxNiIsInQwIiwiY29kZSIsIm1lc3NhZ2UiLCJpbmRleE9mIiwidWludDhhcnIiLCJoZXhTdHIiLCJoZXgiLCJ0b1N0cmluZyIsInRvVXBwZXJDYXNlIiwib2JqIiwiZyIsIkZ1bmN0aW9uIiwiaGFkUnVudGltZSIsInJlZ2VuZXJhdG9yUnVudGltZSIsImdldE93blByb3BlcnR5TmFtZXMiLCJvbGRSdW50aW1lIiwiZSIsImdsb2JhbCIsIk9wIiwiaGFzT3duIiwiJFN5bWJvbCIsIml0ZXJhdG9yU3ltYm9sIiwiaXRlcmF0b3IiLCJhc3luY0l0ZXJhdG9yU3ltYm9sIiwiYXN5bmNJdGVyYXRvciIsInRvU3RyaW5nVGFnU3ltYm9sIiwiaW5Nb2R1bGUiLCJydW50aW1lIiwid3JhcCIsIkdlblN0YXRlU3VzcGVuZGVkU3RhcnQiLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwiR2VuU3RhdGVFeGVjdXRpbmciLCJHZW5TdGF0ZUNvbXBsZXRlZCIsIkNvbnRpbnVlU2VudGluZWwiLCJJdGVyYXRvclByb3RvdHlwZSIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsInZhbHVlcyIsIkdwIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJHZW5lcmF0b3IiLCJHZW5lcmF0b3JGdW5jdGlvbiIsImNvbnN0cnVjdG9yIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwiZ2VuRnVuIiwiY3RvciIsIm1hcmsiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImF3cmFwIiwiYXJnIiwiX19hd2FpdCIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsIkFzeW5jSXRlcmF0b3IiLCJhc3luYyIsImlubmVyRm4iLCJvdXRlckZuIiwidHJ5TG9jc0xpc3QiLCJpdGVyIiwibmV4dCIsInRoZW4iLCJkb25lIiwia2V5cyIsInB1c2giLCJyZXZlcnNlIiwicG9wIiwiQ29udGV4dCIsInJlc2V0Iiwic2tpcFRlbXBSZXNldCIsInByZXYiLCJzZW50IiwiX3NlbnQiLCJkZWxlZ2F0ZSIsIm1ldGhvZCIsInRyeUVudHJpZXMiLCJmb3JFYWNoIiwicmVzZXRUcnlFbnRyeSIsImNoYXJBdCIsImlzTmFOIiwic2xpY2UiLCJzdG9wIiwicm9vdFJlY29yZCIsImNvbXBsZXRpb24iLCJ0eXBlIiwicnZhbCIsImRpc3BhdGNoRXhjZXB0aW9uIiwiZXhjZXB0aW9uIiwiY29udGV4dCIsImhhbmRsZSIsImxvYyIsImNhdWdodCIsInJlY29yZCIsImVudHJ5IiwidHJ5TG9jIiwiaGFzQ2F0Y2giLCJoYXNGaW5hbGx5IiwiY2F0Y2hMb2MiLCJmaW5hbGx5TG9jIiwiRXJyb3IiLCJhYnJ1cHQiLCJmaW5hbGx5RW50cnkiLCJjb21wbGV0ZSIsImFmdGVyTG9jIiwiZmluaXNoIiwiY2F0Y2giLCJ0aHJvd24iLCJkZWxlZ2F0ZVlpZWxkIiwiaXRlcmFibGUiLCJyZXN1bHROYW1lIiwibmV4dExvYyIsInByb3RvR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwiX2ludm9rZSIsInN0YXRlIiwiZG9uZVJlc3VsdCIsImRlbGVnYXRlUmVzdWx0IiwibWF5YmVJbnZva2VEZWxlZ2F0ZSIsInRyeUNhdGNoIiwibWFrZUludm9rZU1ldGhvZCIsImZuIiwiZXJyIiwicHJldmlvdXNQcm9taXNlIiwiY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmciLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImludm9rZSIsInVud3JhcHBlZCIsInJldHVybiIsIlR5cGVFcnJvciIsImluZm8iLCJwdXNoVHJ5RW50cnkiLCJsb2NzIiwiaXRlcmF0b3JNZXRob2QiLCJhc3luY0dlbmVyYXRvclN0ZXAiLCJnZW4iLCJfbmV4dCIsIl90aHJvdyIsImVycm9yIiwiYXJncyIsImFyZ3VtZW50cyIsImFwcGx5IiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELElBQ0EsbUJBQUFHLGVBQUFDLElBQ0FELE9BQUEsb0JBQUFILEdBQ0EsaUJBQUFDLFFBQ0FBLFFBQUEsZUFBQUQsSUFFQUQsRUFBQSxlQUFBQyxJQVJBLENBU0Msb0JBQUFLLFVBQUFDLEtBQUEsV0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFSLFFBR0EsSUFBQUMsRUFBQUssRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FWLFFBQUEsSUFVQSxPQU5BVyxFQUFBSCxHQUFBSSxLQUFBWCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTyxHQUdBTixFQUFBUyxHQUFBLEVBR0FULEVBQUFELFFBMERBLE9BckRBTyxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFmLEVBQUFnQixFQUFBQyxHQUNBVixFQUFBVyxFQUFBbEIsRUFBQWdCLElBQ0FHLE9BQUFDLGVBQUFwQixFQUFBZ0IsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1YsRUFBQWdCLEVBQUEsU0FBQXZCLEdBQ0Esb0JBQUF3QixlQUFBQyxhQUNBTixPQUFBQyxlQUFBcEIsRUFBQXdCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFwQixFQUFBLGNBQWlEMEIsT0FBQSxLQVFqRG5CLEVBQUFvQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBbkIsRUFBQW1CLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQXhCLEVBQUFnQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQW5CLEVBQUFRLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FBQU4sRUFBQU0sSUFBcUJDLEtBQUEsS0FBQUQsSUFDckksT0FBQUYsR0FJQXZCLEVBQUEyQixFQUFBLFNBQUFqQyxHQUNBLElBQUFnQixFQUFBaEIsS0FBQTRCLFdBQ0EsV0FBMkIsT0FBQTVCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQU0sRUFBQVEsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBVixFQUFBVyxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQ3QixFQUFBZ0MsRUFBQSxHQUlBaEMsSUFBQWlDLEVBQUEscUZDbEZNQyxFQUNVLEVBRFZBLEVBRVcsRUFGWEEsRUFRTyxFQVJQQSxFQVNVLEVBVFZBLEVBZVEsR0FmUkEsRUFzQlEsR0F0QlJBLEVBeUJZLEdBS1pDLEVBQWMsQ0FDaEJDLElBQUssRUFDTEMsSUFBSyxFQUNMQyxJQUFLLEdBQ0xDLElBQUssR0FDTEMsR0FBSSxHQUNKQyxJQUFLLEtBR0hDLEVBQWUsQ0FDakJDLElBQUssQ0FBQyxFQUFHLEVBQUcsRUFBRyxHQUNmQyxRQUFTLENBQUMsRUFBRyxJQUFLLEVBQUcsR0FDckJDLFNBQVUsQ0FBQyxFQUFHLEdBQUksSUFBSyxNQUdyQkMsRUFLTyxDQUFFQyxNQUFPLEVBQUc1QixNQUFPLElBTDFCMkIsRUFNUSxDQUFFQyxNQUFPLEVBQUc1QixNQUFPLElBRzNCNkIsRUFBVSxJQUFJQyxZQUVoQkMsRUFBZSxHQUViQyxhQUNGLFNBQUFBLEVBQVlDLEVBQVFDLElBQVMsRUFBQUMsRUFBQUMsU0FBQXpELEtBQUFxRCxHQUN6QnJELEtBQUswRCxJQUFNSixFQUNYdEQsS0FBSzJELGlCQUFrQixFQUN2QjNELEtBQUs0RCxXQUFhLEtBQ2xCNUQsS0FBS3NDLElBQU0sS0FDWHRDLEtBQUt1QyxJQUFNLEtBQ1h2QyxLQUFLd0MsSUFBTSxLQUNYeEMsS0FBS3lDLElBQU0sS0FDWHpDLEtBQUswQyxHQUFLLEtBQ1YxQyxLQUFLMkMsSUFBTSxLQUVYM0MsS0FBSzZELHVCQUFvQkMsRUFDekI5RCxLQUFLK0QsNEJBQXlCRCxFQUM5QjlELEtBQUtnRSx3QkFBcUJGLEVBQzFCOUQsS0FBS2lFLGtCQUFlSCxFQUNwQjlELEtBQUtrRSxvQkFBaUJKLEVBQ3RCOUQsS0FBS21FLGlCQUFjTCxFQUNuQjlELEtBQUtvRSxpQkFBY04sRUFDbkI5RCxLQUFLcUUsZUFBWVAsRUFDakI5RCxLQUFLc0Usa0JBQWVSLEVBQ3BCOUQsS0FBS3VFLHFCQUFrQlQsRUFFdkI5RCxLQUFLd0Usa0JBQTJCVixJQUFaUCxRQUFrRE8sSUFBekJQLEVBQVFpQixjQUE2QmpCLEVBQVFpQixhQUMxRnhFLEtBQUt5RSxpQkFBMEJYLElBQVpQLFFBQWlETyxJQUF4QlAsRUFBUWtCLFlBQTRCbEIsRUFBUWtCLFlBQWMsTUFDdEd6RSxLQUFLMEUsVUFBbUJaLElBQVpQLFFBQTBDTyxJQUFqQlAsRUFBUW1CLEtBQXFCbkIsRUFBUW1CLEtBQU8sTUFDakYxRSxLQUFLMkUsY0FBdUJiLElBQVpQLFFBQThDTyxJQUFyQlAsRUFBUW9CLFNBQXlCcEIsRUFBUW9CLFNBQVcseU1BTW5GM0UsS0FBSzBELElBQUlrQiw4QkFDVDVFLEtBQUswRCxJQUFJbUIsb0JBQW9CLDBCQUM3QjdFLEtBQUswRCxJQUFJb0IsZUFBZSwwQkFDeEI5RSxLQUFLK0UsaUNBQ0wvRSxLQUFLZ0YsUUFBUWhGLEtBQUswRSwrQkFDbEIxRSxLQUFLaUYsZUFBZWpGLEtBQUt5RSxxQkFDL0J6RSxLQUFLa0YsWUFDRGxGLEtBQUtxRSxXQUFXckUsS0FBS3FFLDhEQUVyQnJFLEtBQUtvRSxhQUFhcEUsS0FBS29FLGlTQUt6QnBFLEtBQUswRCxJQUFJeUIsbUJBQW1CLENBQzlCQyxZQUFhLFNBQ2JDLFVBQVcsU0FDWEMsUUFBU2xELEVBQ1RhLE1BQU8sRUFDUDVCLE1BQU8sK0lBS1l5QyxJQUFuQjlELEtBQUt1RixXQUNMQyxjQUFjeEYsS0FBS3VGLFdBRXZCdkYsS0FBS3VGLFVBQVlFLFlBQVl6RixLQUFLMEYsVUFBVTlELEtBQUs1QixNQUFPLEdBQ3hEQSxLQUFLMkYsU0FBVSxPQUNjN0IsSUFBekI5RCxLQUFLNEYsaUJBQ0xKLGNBQWN4RixLQUFLNEYsaUJBRXZCNUYsS0FBSzRGLGdCQUFrQkgsWUFBWXpGLEtBQUs2RixjQUFjakUsS0FBSzVCLEtBQU1BLEtBQUswRCxLQUFNLHFLQUk1RThCLGNBQWN4RixLQUFLdUYsV0FDbkJDLGNBQWN4RixLQUFLNEYsMEJBQ2I1RixLQUFLMEQsSUFBSW9DLGVBQ1g5RixLQUFLc0UsY0FBY3RFLEtBQUtzRSwwSkFHZlYsR0FDYjVELEtBQUs0RCxXQUFhQSxFQUNsQjVELEtBQUtzQyxLQUFPc0IsRUFBYXZCLEVBQVlDLEtBQU8sRUFBSSxFQUFJLEVBQ3BEdEMsS0FBS3VDLEtBQU9xQixFQUFhdkIsRUFBWUUsS0FBTyxFQUFJLEVBQUksRUFDcER2QyxLQUFLd0MsS0FBT29CLEVBQWF2QixFQUFZRyxLQUFPLEVBQUksRUFBSSxFQUNwRHhDLEtBQUt5QyxLQUFPbUIsRUFBYXZCLEVBQVlJLEtBQU8sRUFBSSxFQUFJLEVBQ3BEekMsS0FBSzBDLElBQU1rQixFQUFhdkIsRUFBWUssSUFBTSxFQUFJLEVBQUksRUFDbEQxQyxLQUFLMkMsS0FBT2lCLEVBQWF2QixFQUFZTSxLQUFPLEVBQUksRUFBSSxrRkFHMUMrQixtRkFHVixJQUZBMUUsS0FBSzBFLEtBQU9BLEVBQ1JxQixFQUFNLENBQUMsRUFBRyxFQUFHLEVBQUcsR0FDWDNGLEVBQUksRUFBR0EsRUFBSTJGLEVBQUlDLE9BQVE1RixJQUN4QjZGLEVBQWMsSUFBUHZCLEVBQ1hxQixFQUFJM0YsR0FBSzZGLEVBQ1R2QixHQUFRQSxFQUFPdUIsR0FBUSxvQkFFckJqRyxLQUFLMEQsSUFBSXlCLG1CQUFtQixDQUM5QkMsWUFBYSxTQUNiQyxVQUFXLFNBQ1hDLFFBQVNsRCxFQUNUYSxNQUFPLEVBQ1A1QixNQUFPLEdBQ1IsSUFBSTZFLFdBQVdILFdBQ2QvRixLQUFLaUUsY0FBY2pFLEtBQUtpRSxhQUFhakUsS0FBSzBFLHFSQUk5QzFFLEtBQUttRyxRQUFRbkQsRUFBNEJDLE1BQU9ELEVBQTRCM0IsT0FDNUVyQixLQUFLbUcsUUFBUW5ELEVBQTJCQyxNQUFPRCxFQUEyQjNCLHlMQUdoRStFLEVBQXVCQyx5RkFDM0JyRyxLQUFLMEQsSUFBSXlCLG1CQUFtQixDQUM5QkMsWUFBYSxTQUNiQyxVQUFXLFNBQ1hDLFFBQVNsRCxFQUNUYSxNQUFPLEVBQ1A1QixNQUFTK0UsR0FBeUIsRUFBSyxNQUFVQyx3TEFJNUNoRix5RkFDSHJCLEtBQUswRCxJQUFJeUIsbUJBQW1CLENBQzlCQyxZQUFhLFNBQ2JDLFVBQVcsU0FDWEMsUUFBU2xELEVBQ1RhLE1BQU8sRUFDUDVCLE1BQWUsSUFBUkEsK1FBS0xyQixLQUFLMEQsSUFBSTRDLGtCQUFrQixDQUM3QmxCLFlBQWEsU0FDYkMsVUFBVyxTQUNYQyxRQUFTbEQsRUFDVGEsTUFBTyxFQUNQNUIsTUFBTyxHQUNSLHlSQUlnQnJCLEtBQUswRCxJQUFJNEMsa0JBQWtCLENBQzFDbEIsWUFBYSxTQUNiQyxVQUFXLFNBQ1hDLFFBQVNsRCxFQUNUYSxNQUFPLEVBQ1A1QixNQUFPLEdBQ1IsV0FDSGtGLEdBUElBLFVBT1lDLEtBQUtDLGFBQ056RyxLQUFLNEQsYUFDaEI1RCxLQUFLMEcsaUJBQWlCSCxHQUNsQnZHLEtBQUs2RCxtQkFDTDdELEtBQUs2RCxrQkFBa0I3RCxLQUFLc0MsSUFBS3RDLEtBQUt1QyxJQUFLdkMsS0FBS3dDLElBQUt4QyxLQUFLeUMsSUFBS3pDLEtBQUswQyxHQUFJMUMsS0FBSzJDLG1TQU1sRTNDLEtBQUswRCxJQUFJNEMsa0JBQWtCLENBQzFDbEIsWUFBYSxTQUNiQyxVQUFXLFNBQ1hDLFFBQVNsRCxFQUNUYSxNQUFPLEVBQ1A1QixNQUFPLEdBQ1IsV0FJSCxJQVZJa0YsU0FPQVIsRUFBTSxJQUFJWSxXQUFXSixFQUFPQyxLQUFLSSxRQUNyQ2IsRUFBTWMsS0FBS0MsVUFBVUMsTUFBTUMsS0FBS2pCLElBQzFCa0IsRUFBVW5HLE9BQU9tRyxRQUFRckUsR0FDdEJ4QyxFQUFJLEVBQUdBLEVBQUk2RyxFQUFRakIsT0FBUTVGLElBQzVCeUcsS0FBS0MsVUFBVUcsRUFBUTdHLEdBQUcsTUFBUTJGLEdBQzlCL0YsS0FBSytELHdCQUF3Qi9ELEtBQUsrRCx1QkFBdUJrRCxFQUFRN0csR0FBRyw2TEFLL0RpQixzRkFDYjBFLEVBQU1uRCxFQUFhdkIsWUFDakJyQixLQUFLMEQsSUFBSXlCLG1CQUFtQixDQUM5QkMsWUFBYSxTQUNiQyxVQUFXLFNBQ1hDLFFBQVMsR0FDVHJDLE1BQU8sRUFDUDVCLE1BQU8sR0FDUixJQUFJc0YsV0FBV1osV0FDZC9GLEtBQUtnRSxvQkFBb0JoRSxLQUFLZ0UsbUJBQW1CM0Msb0xBRzdDbUYsb0ZBQ0EsSUFBSU4sV0FDUmdCLEVBQU0sSUFBSUMsZUFDZEMsRUFBSUYsRUFBSUcsT0FBT2IsSUFDVFIsT0FBUyxtQ0FDTGhHLEtBQUswRCxJQUFJNEQsWUFBWSxFQUFHRixVQUMxQnBILEtBQUttRSxhQUFhbkUsS0FBS21FLFlBQVlxQyx5TEFJOUJlLHlGQUNQdkgsS0FBS3dILE9BQU9ELEVBQU92SCxLQUFLNEQsbUJBQzlCNkQsUUFBUUMsSUFBSSx3UUFJUyxLQUFqQnRFLElBQ0FwRCxLQUFLa0UsZUFBZWQsR0FDcEJBLEVBQWUscVJBS0hwRCxLQUFLMEQsSUFBSWlFLFdBQVcsRUFBRyxrQkFBakN6RywyQkFDQyxJQUFJZ0YsV0FBV2hGLEVBQUVzRixLQUFLSSwrUUFJekI1RyxLQUFLMkYsU0FBdUIsTUFBWjNGLEtBQUswRCw0QkFDckIxRCxLQUFLMkYsU0FBVSxvQkFFTTNGLEtBQUs0SCxtQkFBbEJwQixZQUVzQixTQUFsQnhHLEtBQUsyRSxXQUFzQjZCLEVBQU90RCxFQUFRMkUsT0FBT3JCLElBQy9CLFFBQWxCeEcsS0FBSzJFLFdBQXFCNkIsRUFBT3hHLEtBQUs4SCxnQkFBZ0J0QixTQUM5QjFDLElBQXhCOUQsS0FBS2tFLGlCQUNEbEUsS0FBS3dFLGFBQ0x4RSxLQUFLa0UsZUFBZXNDLEdBRXBCcEQsR0FBOEJvRCxvREFLMUIsa0JBQVp1QixFQUFBQyxHQUFHckgsTUFBd0MsSUFBWm9ILEVBQUFDLEdBQUdDLE1BQWNGLEVBQUFDLEdBQUdFLFFBQVFDLFFBQVEsaUJBQW1CLElBQ3RGM0MsY0FBY3hGLEtBQUt1RixXQUNuQkMsY0FBY3hGLEtBQUs0RixpQkFDZjVGLEtBQUt1RSxpQkFBaUJ2RSxLQUFLdUUsMkJBR3ZDdkUsS0FBSzJGLFNBQVUscUpBSVB5QyxHQUNaLElBQUtBLEVBQ0QsTUFBTyxHQUdYLElBREEsSUFBSUMsRUFBUyxHQUNKakksRUFBSSxFQUFHQSxFQUFJZ0ksRUFBU3BDLE9BQVE1RixJQUFLLENBQ3RDLElBQUlrSSxHQUFxQixJQUFkRixFQUFTaEksSUFBV21JLFNBQVMsSUFFeENGLEdBREFDLEVBQXNCLElBQWZBLEVBQUl0QyxPQUFnQixJQUFNc0MsRUFBTUEsRUFHM0MsT0FBT0QsRUFBT0csdUJBS3RCNUksRUFBT0QsUUFBVSxDQUFFMEQsU0FBUWhCLGNBQWFPLCtCQ2pUeENoRCxFQUFBRCxRQU5BLFNBQUE4SSxHQUNBLE9BQUFBLEtBQUFqSCxXQUFBaUgsRUFBQSxDQUNBaEYsUUFBQWdGLHFCQ0ZBN0ksRUFBQUQsUUFBaUJPLEVBQVEsb0JDU3pCLElBQUF3SSxFQUFBLFdBQXFCLE9BQUExSSxLQUFyQixJQUFtQzJJLFNBQUEsY0FBQUEsR0FJbkNDLEVBQUFGLEVBQUFHLG9CQUNBL0gsT0FBQWdJLG9CQUFBSixHQUFBUCxRQUFBLHlCQUdBWSxFQUFBSCxHQUFBRixFQUFBRyxtQkFPQSxHQUpBSCxFQUFBRyx3QkFBQS9FLEVBRUFsRSxFQUFBRCxRQUFpQk8sRUFBUSxHQUV6QjBJLEVBRUFGLEVBQUFHLG1CQUFBRSxPQUdBLFdBQ0FMLEVBQUFHLG1CQUNHLE1BQUFHLEdBQ0hOLEVBQUFHLHdCQUFBL0UsbUJDekJBLFNBQUFtRixHQUNBLGFBRUEsSUFFQW5GLEVBRkFvRixFQUFBcEksT0FBQWtCLFVBQ0FtSCxFQUFBRCxFQUFBakgsZUFFQW1ILEVBQUEsbUJBQUFqSSxjQUFBLEdBQ0FrSSxFQUFBRCxFQUFBRSxVQUFBLGFBQ0FDLEVBQUFILEVBQUFJLGVBQUEsa0JBQ0FDLEVBQUFMLEVBQUFoSSxhQUFBLGdCQUVBc0ksRUFBQSxpQkFBQTlKLEVBQ0ErSixFQUFBVixFQUFBSixtQkFDQSxHQUFBYyxFQUNBRCxJQUdBOUosRUFBQUQsUUFBQWdLLE9BSkEsRUFhQUEsRUFBQVYsRUFBQUosbUJBQUFhLEVBQUE5SixFQUFBRCxRQUFBLElBY0FpSyxPQW9CQSxJQUFBQyxFQUFBLGlCQUNBQyxFQUFBLGlCQUNBQyxFQUFBLFlBQ0FDLEVBQUEsWUFJQUMsRUFBQSxHQVlBQyxFQUFBLEdBQ0FBLEVBQUFiLEdBQUEsV0FDQSxPQUFBckosTUFHQSxJQUFBbUssRUFBQXJKLE9BQUFzSixlQUNBQyxFQUFBRixPQUFBRyxFQUFBLE1BQ0FELEdBQ0FBLElBQUFuQixHQUNBQyxFQUFBNUksS0FBQThKLEVBQUFoQixLQUdBYSxFQUFBRyxHQUdBLElBQUFFLEVBQUFDLEVBQUF4SSxVQUNBeUksRUFBQXpJLFVBQUFsQixPQUFBWSxPQUFBd0ksR0FDQVEsRUFBQTFJLFVBQUF1SSxFQUFBSSxZQUFBSCxFQUNBQSxFQUFBRyxZQUFBRCxFQUNBRixFQUFBZixHQUNBaUIsRUFBQUUsWUFBQSxvQkFZQWpCLEVBQUFrQixvQkFBQSxTQUFBQyxHQUNBLElBQUFDLEVBQUEsbUJBQUFELEtBQUFILFlBQ0EsUUFBQUksSUFDQUEsSUFBQUwsR0FHQSx1QkFBQUssRUFBQUgsYUFBQUcsRUFBQXBLLFFBSUFnSixFQUFBcUIsS0FBQSxTQUFBRixHQVVBLE9BVEFoSyxPQUFBbUssZUFDQW5LLE9BQUFtSyxlQUFBSCxFQUFBTixJQUVBTSxFQUFBSSxVQUFBVixFQUNBZixLQUFBcUIsSUFDQUEsRUFBQXJCLEdBQUEsc0JBR0FxQixFQUFBOUksVUFBQWxCLE9BQUFZLE9BQUE2SSxHQUNBTyxHQU9BbkIsRUFBQXdCLE1BQUEsU0FBQUMsR0FDQSxPQUFZQyxRQUFBRCxJQThFWkUsRUFBQUMsRUFBQXZKLFdBQ0F1SixFQUFBdkosVUFBQXVILEdBQUEsV0FDQSxPQUFBdkosTUFFQTJKLEVBQUE0QixnQkFLQTVCLEVBQUE2QixNQUFBLFNBQUFDLEVBQUFDLEVBQUEzTCxFQUFBNEwsR0FDQSxJQUFBQyxFQUFBLElBQUFMLEVBQ0EzQixFQUFBNkIsRUFBQUMsRUFBQTNMLEVBQUE0TCxJQUdBLE9BQUFoQyxFQUFBa0Isb0JBQUFhLEdBQ0FFLEVBQ0FBLEVBQUFDLE9BQUFDLEtBQUEsU0FBQXZGLEdBQ0EsT0FBQUEsRUFBQXdGLEtBQUF4RixFQUFBbEYsTUFBQXVLLEVBQUFDLFVBc0tBUCxFQUFBZixHQUVBQSxFQUFBZCxHQUFBLFlBT0FjLEVBQUFsQixHQUFBLFdBQ0EsT0FBQXJKLE1BR0F1SyxFQUFBaEMsU0FBQSxXQUNBLDRCQWtDQW9CLEVBQUFxQyxLQUFBLFNBQUFsSyxHQUNBLElBQUFrSyxFQUFBLEdBQ0EsUUFBQXJLLEtBQUFHLEVBQ0FrSyxFQUFBQyxLQUFBdEssR0FNQSxPQUpBcUssRUFBQUUsVUFJQSxTQUFBTCxJQUNBLEtBQUFHLEVBQUFoRyxRQUFBLENBQ0EsSUFBQXJFLEVBQUFxSyxFQUFBRyxNQUNBLEdBQUF4SyxLQUFBRyxFQUdBLE9BRkErSixFQUFBeEssTUFBQU0sRUFDQWtLLEVBQUFFLE1BQUEsRUFDQUYsRUFRQSxPQURBQSxFQUFBRSxNQUFBLEVBQ0FGLElBc0NBbEMsRUFBQVcsU0FNQThCLEVBQUFwSyxVQUFBLENBQ0EySSxZQUFBeUIsRUFFQUMsTUFBQSxTQUFBQyxHQWNBLEdBYkF0TSxLQUFBdU0sS0FBQSxFQUNBdk0sS0FBQTZMLEtBQUEsRUFHQTdMLEtBQUF3TSxLQUFBeE0sS0FBQXlNLE1BQUEzSSxFQUNBOUQsS0FBQStMLE1BQUEsRUFDQS9MLEtBQUEwTSxTQUFBLEtBRUExTSxLQUFBMk0sT0FBQSxPQUNBM00sS0FBQW9MLElBQUF0SCxFQUVBOUQsS0FBQTRNLFdBQUFDLFFBQUFDLElBRUFSLEVBQ0EsUUFBQTNMLEtBQUFYLEtBRUEsTUFBQVcsRUFBQW9NLE9BQUEsSUFDQTVELEVBQUE1SSxLQUFBUCxLQUFBVyxLQUNBcU0sT0FBQXJNLEVBQUFzTSxNQUFBLE1BQ0FqTixLQUFBVyxHQUFBbUQsSUFNQW9KLEtBQUEsV0FDQWxOLEtBQUErTCxNQUFBLEVBRUEsSUFDQW9CLEVBREFuTixLQUFBNE0sV0FBQSxHQUNBUSxXQUNBLGFBQUFELEVBQUFFLEtBQ0EsTUFBQUYsRUFBQS9CLElBR0EsT0FBQXBMLEtBQUFzTixNQUdBQyxrQkFBQSxTQUFBQyxHQUNBLEdBQUF4TixLQUFBK0wsS0FDQSxNQUFBeUIsRUFHQSxJQUFBQyxFQUFBek4sS0FDQSxTQUFBME4sRUFBQUMsRUFBQUMsR0FZQSxPQVhBQyxFQUFBUixLQUFBLFFBQ0FRLEVBQUF6QyxJQUFBb0MsRUFDQUMsRUFBQTVCLEtBQUE4QixFQUVBQyxJQUdBSCxFQUFBZCxPQUFBLE9BQ0FjLEVBQUFyQyxJQUFBdEgsS0FHQThKLEVBR0EsUUFBQXhOLEVBQUFKLEtBQUE0TSxXQUFBNUcsT0FBQSxFQUE4QzVGLEdBQUEsSUFBUUEsRUFBQSxDQUN0RCxJQUFBME4sRUFBQTlOLEtBQUE0TSxXQUFBeE0sR0FDQXlOLEVBQUFDLEVBQUFWLFdBRUEsWUFBQVUsRUFBQUMsT0FJQSxPQUFBTCxFQUFBLE9BR0EsR0FBQUksRUFBQUMsUUFBQS9OLEtBQUF1TSxLQUFBLENBQ0EsSUFBQXlCLEVBQUE3RSxFQUFBNUksS0FBQXVOLEVBQUEsWUFDQUcsRUFBQTlFLEVBQUE1SSxLQUFBdU4sRUFBQSxjQUVBLEdBQUFFLEdBQUFDLEVBQUEsQ0FDQSxHQUFBak8sS0FBQXVNLEtBQUF1QixFQUFBSSxTQUNBLE9BQUFSLEVBQUFJLEVBQUFJLFVBQUEsR0FDYSxHQUFBbE8sS0FBQXVNLEtBQUF1QixFQUFBSyxXQUNiLE9BQUFULEVBQUFJLEVBQUFLLGlCQUdXLEdBQUFILEdBQ1gsR0FBQWhPLEtBQUF1TSxLQUFBdUIsRUFBQUksU0FDQSxPQUFBUixFQUFBSSxFQUFBSSxVQUFBLE9BR1csS0FBQUQsRUFNWCxVQUFBRyxNQUFBLDBDQUxBLEdBQUFwTyxLQUFBdU0sS0FBQXVCLEVBQUFLLFdBQ0EsT0FBQVQsRUFBQUksRUFBQUssZ0JBVUFFLE9BQUEsU0FBQWhCLEVBQUFqQyxHQUNBLFFBQUFoTCxFQUFBSixLQUFBNE0sV0FBQTVHLE9BQUEsRUFBOEM1RixHQUFBLElBQVFBLEVBQUEsQ0FDdEQsSUFBQTBOLEVBQUE5TixLQUFBNE0sV0FBQXhNLEdBQ0EsR0FBQTBOLEVBQUFDLFFBQUEvTixLQUFBdU0sTUFDQXBELEVBQUE1SSxLQUFBdU4sRUFBQSxlQUNBOU4sS0FBQXVNLEtBQUF1QixFQUFBSyxXQUFBLENBQ0EsSUFBQUcsRUFBQVIsRUFDQSxPQUlBUSxJQUNBLFVBQUFqQixHQUNBLGFBQUFBLElBQ0FpQixFQUFBUCxRQUFBM0MsR0FDQUEsR0FBQWtELEVBQUFILGFBR0FHLEVBQUEsTUFHQSxJQUFBVCxFQUFBUyxJQUFBbEIsV0FBQSxHQUlBLE9BSEFTLEVBQUFSLE9BQ0FRLEVBQUF6QyxNQUVBa0QsR0FDQXRPLEtBQUEyTSxPQUFBLE9BQ0EzTSxLQUFBNkwsS0FBQXlDLEVBQUFILFdBQ0FsRSxHQUdBakssS0FBQXVPLFNBQUFWLElBR0FVLFNBQUEsU0FBQVYsRUFBQVcsR0FDQSxhQUFBWCxFQUFBUixLQUNBLE1BQUFRLEVBQUF6QyxJQWNBLE1BWEEsVUFBQXlDLEVBQUFSLE1BQ0EsYUFBQVEsRUFBQVIsS0FDQXJOLEtBQUE2TCxLQUFBZ0MsRUFBQXpDLElBQ08sV0FBQXlDLEVBQUFSLE1BQ1ByTixLQUFBc04sS0FBQXROLEtBQUFvTCxJQUFBeUMsRUFBQXpDLElBQ0FwTCxLQUFBMk0sT0FBQSxTQUNBM00sS0FBQTZMLEtBQUEsT0FDTyxXQUFBZ0MsRUFBQVIsTUFBQW1CLElBQ1B4TyxLQUFBNkwsS0FBQTJDLEdBR0F2RSxHQUdBd0UsT0FBQSxTQUFBTixHQUNBLFFBQUEvTixFQUFBSixLQUFBNE0sV0FBQTVHLE9BQUEsRUFBOEM1RixHQUFBLElBQVFBLEVBQUEsQ0FDdEQsSUFBQTBOLEVBQUE5TixLQUFBNE0sV0FBQXhNLEdBQ0EsR0FBQTBOLEVBQUFLLGVBR0EsT0FGQW5PLEtBQUF1TyxTQUFBVCxFQUFBVixXQUFBVSxFQUFBVSxVQUNBMUIsRUFBQWdCLEdBQ0E3RCxJQUtBeUUsTUFBQSxTQUFBWCxHQUNBLFFBQUEzTixFQUFBSixLQUFBNE0sV0FBQTVHLE9BQUEsRUFBOEM1RixHQUFBLElBQVFBLEVBQUEsQ0FDdEQsSUFBQTBOLEVBQUE5TixLQUFBNE0sV0FBQXhNLEdBQ0EsR0FBQTBOLEVBQUFDLFdBQUEsQ0FDQSxJQUFBRixFQUFBQyxFQUFBVixXQUNBLGFBQUFTLEVBQUFSLEtBQUEsQ0FDQSxJQUFBc0IsRUFBQWQsRUFBQXpDLElBQ0EwQixFQUFBZ0IsR0FFQSxPQUFBYSxHQU1BLFVBQUFQLE1BQUEsMEJBR0FRLGNBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FhQSxPQVpBL08sS0FBQTBNLFNBQUEsQ0FDQXBELFNBQUFnQixFQUFBdUUsR0FDQUMsYUFDQUMsV0FHQSxTQUFBL08sS0FBQTJNLFNBR0EzTSxLQUFBb0wsSUFBQXRILEdBR0FtRyxJQTNxQkEsU0FBQUwsRUFBQTZCLEVBQUFDLEVBQUEzTCxFQUFBNEwsR0FFQSxJQUFBcUQsRUFBQXRELEtBQUExSixxQkFBQXlJLEVBQUFpQixFQUFBakIsRUFDQXdFLEVBQUFuTyxPQUFBWSxPQUFBc04sRUFBQWhOLFdBQ0F5TCxFQUFBLElBQUFyQixFQUFBVCxHQUFBLElBTUEsT0FGQXNELEVBQUFDLFFBME1BLFNBQUF6RCxFQUFBMUwsRUFBQTBOLEdBQ0EsSUFBQTBCLEVBQUF0RixFQUVBLGdCQUFBOEMsRUFBQXZCLEdBQ0EsR0FBQStELElBQUFwRixFQUNBLFVBQUFxRSxNQUFBLGdDQUdBLEdBQUFlLElBQUFuRixFQUFBLENBQ0EsYUFBQTJDLEVBQ0EsTUFBQXZCLEVBS0EsT0FBQWdFLElBTUEsSUFIQTNCLEVBQUFkLFNBQ0FjLEVBQUFyQyxRQUVBLENBQ0EsSUFBQXNCLEVBQUFlLEVBQUFmLFNBQ0EsR0FBQUEsRUFBQSxDQUNBLElBQUEyQyxFQUFBQyxFQUFBNUMsRUFBQWUsR0FDQSxHQUFBNEIsRUFBQSxDQUNBLEdBQUFBLElBQUFwRixFQUFBLFNBQ0EsT0FBQW9GLEdBSUEsWUFBQTVCLEVBQUFkLE9BR0FjLEVBQUFqQixLQUFBaUIsRUFBQWhCLE1BQUFnQixFQUFBckMsU0FFUyxhQUFBcUMsRUFBQWQsT0FBQSxDQUNULEdBQUF3QyxJQUFBdEYsRUFFQSxNQURBc0YsRUFBQW5GLEVBQ0F5RCxFQUFBckMsSUFHQXFDLEVBQUFGLGtCQUFBRSxFQUFBckMsU0FFUyxXQUFBcUMsRUFBQWQsUUFDVGMsRUFBQVksT0FBQSxTQUFBWixFQUFBckMsS0FHQStELEVBQUFwRixFQUVBLElBQUE4RCxFQUFBMEIsRUFBQTlELEVBQUExTCxFQUFBME4sR0FDQSxjQUFBSSxFQUFBUixLQUFBLENBT0EsR0FKQThCLEVBQUExQixFQUFBMUIsS0FDQS9CLEVBQ0FGLEVBRUErRCxFQUFBekMsTUFBQW5CLEVBQ0EsU0FHQSxPQUNBNUksTUFBQXdNLEVBQUF6QyxJQUNBVyxLQUFBMEIsRUFBQTFCLE1BR1MsVUFBQThCLEVBQUFSLE9BQ1Q4QixFQUFBbkYsRUFHQXlELEVBQUFkLE9BQUEsUUFDQWMsRUFBQXJDLElBQUF5QyxFQUFBekMsT0FsUkFvRSxDQUFBL0QsRUFBQTFMLEVBQUEwTixHQUVBd0IsRUFjQSxTQUFBTSxFQUFBRSxFQUFBaEgsRUFBQTJDLEdBQ0EsSUFDQSxPQUFjaUMsS0FBQSxTQUFBakMsSUFBQXFFLEVBQUFsUCxLQUFBa0ksRUFBQTJDLElBQ1QsTUFBQXNFLEdBQ0wsT0FBY3JDLEtBQUEsUUFBQWpDLElBQUFzRSxJQWlCZCxTQUFBakYsS0FDQSxTQUFBQyxLQUNBLFNBQUFGLEtBNEJBLFNBQUFjLEVBQUF0SixHQUNBLDBCQUFBNkssUUFBQSxTQUFBRixHQUNBM0ssRUFBQTJLLEdBQUEsU0FBQXZCLEdBQ0EsT0FBQXBMLEtBQUFrUCxRQUFBdkMsRUFBQXZCLE1Bb0NBLFNBQUFHLEVBQUEwRCxHQXdDQSxJQUFBVSxFQWdDQTNQLEtBQUFrUCxRQTlCQSxTQUFBdkMsRUFBQXZCLEdBQ0EsU0FBQXdFLElBQ0EsV0FBQUMsUUFBQSxTQUFBQyxFQUFBQyxJQTNDQSxTQUFBQyxFQUFBckQsRUFBQXZCLEVBQUEwRSxFQUFBQyxHQUNBLElBQUFsQyxFQUFBMEIsRUFBQU4sRUFBQXRDLEdBQUFzQyxFQUFBN0QsR0FDQSxhQUFBeUMsRUFBQVIsS0FFTyxDQUNQLElBQUE5RyxFQUFBc0gsRUFBQXpDLElBQ0EvSixFQUFBa0YsRUFBQWxGLE1BQ0EsT0FBQUEsR0FDQSxpQkFBQUEsR0FDQThILEVBQUE1SSxLQUFBYyxFQUFBLFdBQ0F3TyxRQUFBQyxRQUFBek8sRUFBQWdLLFNBQUFTLEtBQUEsU0FBQXpLLEdBQ0EyTyxFQUFBLE9BQUEzTyxFQUFBeU8sRUFBQUMsSUFDVyxTQUFBTCxHQUNYTSxFQUFBLFFBQUFOLEVBQUFJLEVBQUFDLEtBSUFGLFFBQUFDLFFBQUF6TyxHQUFBeUssS0FBQSxTQUFBbUUsR0FnQkExSixFQUFBbEYsTUFBQTRPLEVBQ0FILEVBQUF2SixJQUNTd0osR0FoQ1RBLEVBQUFsQyxFQUFBekMsS0F5Q0E0RSxDQUFBckQsRUFBQXZCLEVBQUEwRSxFQUFBQyxLQUlBLE9BQUFKLEVBYUFBLElBQUE3RCxLQUNBOEQsRUFHQUEsR0FDQUEsS0ErR0EsU0FBQU4sRUFBQTVDLEVBQUFlLEdBQ0EsSUFBQWQsRUFBQUQsRUFBQXBELFNBQUFtRSxFQUFBZCxRQUNBLEdBQUFBLElBQUE3SSxFQUFBLENBS0EsR0FGQTJKLEVBQUFmLFNBQUEsS0FFQSxVQUFBZSxFQUFBZCxPQUFBLENBQ0EsR0FBQUQsRUFBQXBELFNBQUE0RyxTQUdBekMsRUFBQWQsT0FBQSxTQUNBYyxFQUFBckMsSUFBQXRILEVBQ0F3TCxFQUFBNUMsRUFBQWUsR0FFQSxVQUFBQSxFQUFBZCxRQUdBLE9BQUExQyxFQUlBd0QsRUFBQWQsT0FBQSxRQUNBYyxFQUFBckMsSUFBQSxJQUFBK0UsVUFDQSxrREFHQSxPQUFBbEcsRUFHQSxJQUFBNEQsRUFBQTBCLEVBQUE1QyxFQUFBRCxFQUFBcEQsU0FBQW1FLEVBQUFyQyxLQUVBLGFBQUF5QyxFQUFBUixLQUlBLE9BSEFJLEVBQUFkLE9BQUEsUUFDQWMsRUFBQXJDLElBQUF5QyxFQUFBekMsSUFDQXFDLEVBQUFmLFNBQUEsS0FDQXpDLEVBR0EsSUFBQW1HLEVBQUF2QyxFQUFBekMsSUFFQSxPQUFBZ0YsRUFPQUEsRUFBQXJFLE1BR0EwQixFQUFBZixFQUFBb0MsWUFBQXNCLEVBQUEvTyxNQUdBb00sRUFBQTVCLEtBQUFhLEVBQUFxQyxRQVFBLFdBQUF0QixFQUFBZCxTQUNBYyxFQUFBZCxPQUFBLE9BQ0FjLEVBQUFyQyxJQUFBdEgsR0FVQTJKLEVBQUFmLFNBQUEsS0FDQXpDLEdBTkFtRyxHQTNCQTNDLEVBQUFkLE9BQUEsUUFDQWMsRUFBQXJDLElBQUEsSUFBQStFLFVBQUEsb0NBQ0ExQyxFQUFBZixTQUFBLEtBQ0F6QyxHQW9EQSxTQUFBb0csRUFBQUMsR0FDQSxJQUFBeEMsRUFBQSxDQUFpQkMsT0FBQXVDLEVBQUEsSUFFakIsS0FBQUEsSUFDQXhDLEVBQUFJLFNBQUFvQyxFQUFBLElBR0EsS0FBQUEsSUFDQXhDLEVBQUFLLFdBQUFtQyxFQUFBLEdBQ0F4QyxFQUFBVSxTQUFBOEIsRUFBQSxJQUdBdFEsS0FBQTRNLFdBQUFYLEtBQUE2QixHQUdBLFNBQUFoQixFQUFBZ0IsR0FDQSxJQUFBRCxFQUFBQyxFQUFBVixZQUFBLEdBQ0FTLEVBQUFSLEtBQUEsZ0JBQ0FRLEVBQUF6QyxJQUNBMEMsRUFBQVYsV0FBQVMsRUFHQSxTQUFBekIsRUFBQVQsR0FJQTNMLEtBQUE0TSxXQUFBLEVBQXdCbUIsT0FBQSxTQUN4QnBDLEVBQUFrQixRQUFBd0QsRUFBQXJRLE1BQ0FBLEtBQUFxTSxPQUFBLEdBOEJBLFNBQUEvQixFQUFBdUUsR0FDQSxHQUFBQSxFQUFBLENBQ0EsSUFBQTBCLEVBQUExQixFQUFBeEYsR0FDQSxHQUFBa0gsRUFDQSxPQUFBQSxFQUFBaFEsS0FBQXNPLEdBR0Esc0JBQUFBLEVBQUFoRCxLQUNBLE9BQUFnRCxFQUdBLElBQUE3QixNQUFBNkIsRUFBQTdJLFFBQUEsQ0FDQSxJQUFBNUYsR0FBQSxFQUFBeUwsRUFBQSxTQUFBQSxJQUNBLE9BQUF6TCxFQUFBeU8sRUFBQTdJLFFBQ0EsR0FBQW1ELEVBQUE1SSxLQUFBc08sRUFBQXpPLEdBR0EsT0FGQXlMLEVBQUF4SyxNQUFBd04sRUFBQXpPLEdBQ0F5TCxFQUFBRSxNQUFBLEVBQ0FGLEVBT0EsT0FIQUEsRUFBQXhLLE1BQUF5QyxFQUNBK0gsRUFBQUUsTUFBQSxFQUVBRixHQUdBLE9BQUFBLFVBS0EsT0FBWUEsS0FBQXVELEdBSVosU0FBQUEsSUFDQSxPQUFZL04sTUFBQXlDLEVBQUFpSSxNQUFBLElBaGdCWixDQThzQkEsV0FBZSxPQUFBL0wsS0FBZixJQUE2QjJJLFNBQUEsY0FBQUEsbUJDcnRCN0IsU0FBQTZILEVBQUFDLEVBQUFYLEVBQUFDLEVBQUFXLEVBQUFDLEVBQUFoUCxFQUFBeUosR0FDQSxJQUNBLElBQUFnRixFQUFBSyxFQUFBOU8sR0FBQXlKLEdBQ0EvSixFQUFBK08sRUFBQS9PLE1BQ0csTUFBQXVQLEdBRUgsWUFEQWIsRUFBQWEsR0FJQVIsRUFBQXJFLEtBQ0ErRCxFQUFBek8sR0FFQXdPLFFBQUFDLFFBQUF6TyxHQUFBeUssS0FBQTRFLEVBQUFDLEdBd0JBL1EsRUFBQUQsUUFwQkEsU0FBQThQLEdBQ0Esa0JBQ0EsSUFBQTFQLEVBQUFDLEtBQ0E2USxFQUFBQyxVQUNBLFdBQUFqQixRQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQVUsRUFBQWhCLEVBQUFzQixNQUFBaFIsRUFBQThRLEdBRUEsU0FBQUgsRUFBQXJQLEdBQ0FtUCxFQUFBQyxFQUFBWCxFQUFBQyxFQUFBVyxFQUFBQyxFQUFBLE9BQUF0UCxHQUdBLFNBQUFzUCxFQUFBakIsR0FDQWMsRUFBQUMsRUFBQVgsRUFBQUMsRUFBQVcsRUFBQUMsRUFBQSxRQUFBakIsR0FHQWdCLE9BQUE1TSxzQkN6QkFsRSxFQUFBRCxRQU5BLFNBQUFxUixFQUFBQyxHQUNBLEtBQUFELGFBQUFDLEdBQ0EsVUFBQWQsVUFBQSxxRENGQSxTQUFBZSxFQUFBQyxFQUFBQyxHQUNBLFFBQUFoUixFQUFBLEVBQWlCQSxFQUFBZ1IsRUFBQXBMLE9BQWtCNUYsSUFBQSxDQUNuQyxJQUFBaVIsRUFBQUQsRUFBQWhSLEdBQ0FpUixFQUFBclEsV0FBQXFRLEVBQUFyUSxhQUFBLEVBQ0FxUSxFQUFBQyxjQUFBLEVBQ0EsVUFBQUQsTUFBQUUsVUFBQSxHQUNBelEsT0FBQUMsZUFBQW9RLEVBQUFFLEVBQUExUCxJQUFBMFAsSUFVQXpSLEVBQUFELFFBTkEsU0FBQXNSLEVBQUFPLEVBQUFDLEdBR0EsT0FGQUQsR0FBQU4sRUFBQUQsRUFBQWpQLFVBQUF3UCxHQUNBQyxHQUFBUCxFQUFBRCxFQUFBUSxHQUNBUiIsImZpbGUiOiJUaWJib1dlYlNlcmlhbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcIlRpYmJvV2ViU2VyaWFsXCIsIFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIlRpYmJvV2ViU2VyaWFsXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIlRpYmJvV2ViU2VyaWFsXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImNvbnN0IENPTlRST0xfQ09NTUFORFMgPSB7XHJcbiAgICBJRkNfRU5BQkxFOiAweDAwLFxyXG4gICAgU0VUX0JBVURESVY6IDB4MDEsXHJcbiAgICBHRVRfQkFVRERJVjogMHgwMixcclxuICAgIFNFVF9MSU5FX0NUTDogMHgwMyxcclxuICAgIEdFVF9MSU5FX0NUTDogMHgwNCxcclxuICAgIFNFVF9CUkVBSzogMHgwNSxcclxuICAgIElNTV9DSEFSOiAweDA2LFxyXG4gICAgU0VUX01IUzogMHgwNyxcclxuICAgIEdFVF9NRE1TVFM6IDB4MDgsXHJcbiAgICBTRVRfWE9OOiAweDA5LFxyXG4gICAgU0VUX1hPRkY6IDB4MEEsXHJcbiAgICBTRVRfRVZFTlRNQVNLOiAweDBCLFxyXG4gICAgR0VUX0VWRU5UTUFTSzogMHgwQyxcclxuICAgIEdFVF9FVkVOVFNUQVRFOiAweDE2LFxyXG4gICAgU0VUX0NIQVI6IDB4MEQsXHJcbiAgICBHRVRfQ0hBUlM6IDB4MEUsXHJcbiAgICBHRVRfUFJPUFM6IDB4MEYsXHJcbiAgICBHRVRfQ09NTV9TVEFUVVM6IDB4MTAsXHJcbiAgICBSRVNFVDogMHgxMSxcclxuICAgIFBVUkdFOiAweDEyLFxyXG4gICAgU0VUX0ZMT1c6IDB4MTMsXHJcbiAgICBHRVRfRkxPVzogMHgxNCxcclxuICAgIEVNQkVEX0VWRU5UUzogMHgxNSxcclxuICAgIEdFVF9CQVVEUkFURTogMHgxRCxcclxuICAgIFNFVF9CQVVEUkFURTogMHgxRSxcclxuICAgIFNFVF9DSEFSUzogMHgxOSxcclxuICAgIFZFTkRPUl9TUEVDSUZJQzogMHhGRlxyXG59O1xyXG5cclxuY29uc3QgTElORV9TVEFURVMgPSB7XHJcbiAgICBEVFI6IDEsXHJcbiAgICBSVFM6IDIsXHJcbiAgICBDVFM6IDE2LFxyXG4gICAgRFNSOiAzMixcclxuICAgIFJJOiA2NCxcclxuICAgIERDRDogMTI4XHJcbn07XHJcblxyXG5jb25zdCBGTE9XX0NPTlRST0wgPSB7XHJcbiAgICBPRkY6IFswLCAwLCAwLCAwXSxcclxuICAgIENUU19SVFM6IFs4LCAxNDQsIDAsIDBdLFxyXG4gICAgWE9OX1hPRkY6IFswLCAxOSwgNDAwLCA0MDBdXHJcbn07XHJcblxyXG5jb25zdCBTUEVDSUFMX0NIQVJBQ1RFUlMgPSB7XHJcbiAgICBFT0ZDSEFSOiB7IGluZGV4OiAwLCB2YWx1ZTogMCB9LFxyXG4gICAgRVJST1JDSEFSOiB7IGluZGV4OiAxLCB2YWx1ZTogMCB9LFxyXG4gICAgQlJFQUtDSEFSOiB7IGluZGV4OiAyLCB2YWx1ZTogMCB9LFxyXG4gICAgRVZFTlRDSEFSOiB7IGluZGV4OiAzLCB2YWx1ZTogMCB9LFxyXG4gICAgWE9OQ0hBUjogeyBpbmRleDogNCwgdmFsdWU6IDE3IH0sXHJcbiAgICBYT0ZGQ0hBUjogeyBpbmRleDogNSwgdmFsdWU6IDE5IH1cclxufTtcclxuXHJcbmNvbnN0IERFQ09ERVIgPSBuZXcgVGV4dERlY29kZXIoKTtcclxuXHJcbmxldCBidWZmZXJlZERhdGEgPSAnJztcclxuXHJcbmNsYXNzIFNlcmlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihkZXZpY2UsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnVzYiA9IGRldmljZTtcclxuICAgICAgICB0aGlzLnJlcXVlc3RUaW1lZE91dCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubW9kZW1TdGF0ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5EVFIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuUlRTID0gbnVsbDtcclxuICAgICAgICB0aGlzLkNUUyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5EU1IgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuUkkgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuRENEID0gbnVsbDtcclxuXHJcbiAgICAgICAgdGhpcy5tb2RlbVN0YXRlQ2hhbmdlZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmdldEZsb3dDb250cm9sQ2FsbGJhY2sgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5mbG93Q29udHJvbENoYW5nZWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5iYXVkQ2hhbmdlT0sgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5zZXJEYXRhQXJyaXZhbCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnNlckRhdGFTZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdEZhaWwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0T0sgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0T0sgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uRXJyb3IgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHRoaXMuYXV0b1JlYWREYXRhID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuYXV0b1JlYWREYXRhICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmF1dG9SZWFkRGF0YSA6IHRydWU7XHJcbiAgICAgICAgdGhpcy5mbG93Q29udHJvbCA9IG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmZsb3dDb250cm9sICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmZsb3dDb250cm9sIDogJ09GRic7XHJcbiAgICAgICAgdGhpcy5iYXVkID0gb3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMuYmF1ZCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5iYXVkIDogMzg0MDA7XHJcbiAgICAgICAgdGhpcy5lbmNvZGluZyA9IG9wdGlvbnMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmVuY29kaW5nICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmVuY29kaW5nIDogJyc7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGNvbm5lY3QoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2Iub3BlbigpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzYi5zZWxlY3RDb25maWd1cmF0aW9uKDEpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzYi5jbGFpbUludGVyZmFjZSgwKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5lbmFibGUoKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRCYXVkKHRoaXMuYmF1ZCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2V0Rmxvd0NvbnRyb2wodGhpcy5mbG93Q29udHJvbCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VGltZXJzKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3RPSykgdGhpcy5jb25uZWN0T0soKTtcclxuICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0RmFpbCkgdGhpcy5jb25uZWN0RmFpbCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBlbmFibGUoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2IuY29udHJvbFRyYW5zZmVyT3V0KHtcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICd2ZW5kb3InLFxyXG4gICAgICAgICAgICByZWNpcGllbnQ6ICdkZXZpY2UnLFxyXG4gICAgICAgICAgICByZXF1ZXN0OiBDT05UUk9MX0NPTU1BTkRTLklGQ19FTkFCTEUsXHJcbiAgICAgICAgICAgIGluZGV4OiAweDAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogMHgwMVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHNldFRpbWVycygpIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhVGltZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZGF0YVRpbWVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhVGltZXIgPSBzZXRJbnRlcnZhbCh0aGlzLnJlYWRUaW1lci5iaW5kKHRoaXMpLCAxKTtcclxuICAgICAgICB0aGlzLmNhblJlYWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLm1vZGVtU3RhdGVUaW1lciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5tb2RlbVN0YXRlVGltZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1vZGVtU3RhdGVUaW1lciA9IHNldEludGVydmFsKHRoaXMuZ2V0TW9kZW1TdGF0ZS5iaW5kKHRoaXMsIHRoaXMudXNiKSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZGlzY29ubmVjdCgpIHtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZGF0YVRpbWVyKTtcclxuICAgICAgICBjbGVhckludGVydmFsKHRoaXMubW9kZW1TdGF0ZVRpbWVyKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnVzYi5jbG9zZSgpO1xyXG4gICAgICAgIGlmICh0aGlzLmRpc2Nvbm5lY3RPSykgdGhpcy5kaXNjb25uZWN0T0soKTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNb2RlbVN0YXRlKG1vZGVtU3RhdGUpIHtcclxuICAgICAgICB0aGlzLm1vZGVtU3RhdGUgPSBtb2RlbVN0YXRlO1xyXG4gICAgICAgIHRoaXMuRFRSID0gKG1vZGVtU3RhdGUgJiBMSU5FX1NUQVRFUy5EVFIpID4gMCA/IDEgOiAwO1xyXG4gICAgICAgIHRoaXMuUlRTID0gKG1vZGVtU3RhdGUgJiBMSU5FX1NUQVRFUy5SVFMpID4gMCA/IDEgOiAwO1xyXG4gICAgICAgIHRoaXMuQ1RTID0gKG1vZGVtU3RhdGUgJiBMSU5FX1NUQVRFUy5DVFMpID4gMCA/IDEgOiAwO1xyXG4gICAgICAgIHRoaXMuRFNSID0gKG1vZGVtU3RhdGUgJiBMSU5FX1NUQVRFUy5EU1IpID4gMCA/IDEgOiAwO1xyXG4gICAgICAgIHRoaXMuUkkgPSAobW9kZW1TdGF0ZSAmIExJTkVfU1RBVEVTLlJJKSA+IDAgPyAxIDogMDtcclxuICAgICAgICB0aGlzLkRDRCA9IChtb2RlbVN0YXRlICYgTElORV9TVEFURVMuRENEKSA+IDAgPyAxIDogMDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXRCYXVkKGJhdWQpIHtcclxuICAgICAgICB0aGlzLmJhdWQgPSBiYXVkO1xyXG4gICAgICAgIGxldCBhcnIgPSBbMCwgMCwgMCwgMF07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGJ5dGUgPSBiYXVkICYgMHhmZjtcclxuICAgICAgICAgICAgYXJyW2ldID0gYnl0ZTtcclxuICAgICAgICAgICAgYmF1ZCA9IChiYXVkIC0gYnl0ZSkgLyAyNTY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMudXNiLmNvbnRyb2xUcmFuc2Zlck91dCh7XHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAndmVuZG9yJyxcclxuICAgICAgICAgICAgcmVjaXBpZW50OiAnZGV2aWNlJyxcclxuICAgICAgICAgICAgcmVxdWVzdDogQ09OVFJPTF9DT01NQU5EUy5TRVRfQkFVRFJBVEUsXHJcbiAgICAgICAgICAgIGluZGV4OiAweDAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogMFxyXG4gICAgICAgIH0sIG5ldyBVaW50OEFycmF5KGFycikpO1xyXG4gICAgICAgIGlmICh0aGlzLmJhdWRDaGFuZ2VPSykgdGhpcy5iYXVkQ2hhbmdlT0sodGhpcy5iYXVkKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBpbml0aWFsaXplU3BlY2lhbENoYXJhY3RlcnMoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRDaGFyKFNQRUNJQUxfQ0hBUkFDVEVSUy5YT0ZGQ0hBUi5pbmRleCwgU1BFQ0lBTF9DSEFSQUNURVJTLlhPRkZDSEFSLnZhbHVlKTtcclxuICAgICAgICB0aGlzLnNldENoYXIoU1BFQ0lBTF9DSEFSQUNURVJTLlhPTkNIQVIuaW5kZXgsIFNQRUNJQUxfQ0hBUkFDVEVSUy5YT05DSEFSLnZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXRDaGFyKFNwZWNpYWxDaGFyYWN0ZXJJbmRleCwgU3BlY2lhbENoYXJhY3RlclZhbHVlKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2IuY29udHJvbFRyYW5zZmVyT3V0KHtcclxuICAgICAgICAgICAgcmVxdWVzdFR5cGU6ICd2ZW5kb3InLFxyXG4gICAgICAgICAgICByZWNpcGllbnQ6ICdkZXZpY2UnLFxyXG4gICAgICAgICAgICByZXF1ZXN0OiBDT05UUk9MX0NPTU1BTkRTLlNFVF9DSEFSLFxyXG4gICAgICAgICAgICBpbmRleDogMHgwMCxcclxuICAgICAgICAgICAgdmFsdWU6ICgoU3BlY2lhbENoYXJhY3RlckluZGV4IDw8IDgpICYgMHhGRjAwKSB8IFNwZWNpYWxDaGFyYWN0ZXJWYWx1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNldE1IUyh2YWx1ZSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXNiLmNvbnRyb2xUcmFuc2Zlck91dCh7XHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAndmVuZG9yJyxcclxuICAgICAgICAgICAgcmVjaXBpZW50OiAnZGV2aWNlJyxcclxuICAgICAgICAgICAgcmVxdWVzdDogQ09OVFJPTF9DT01NQU5EUy5TRVRfTUhTLFxyXG4gICAgICAgICAgICBpbmRleDogMHgwMCxcclxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlIHwgMHgyMDAgfCAweDEwMFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEJhdWQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2IuY29udHJvbFRyYW5zZmVySW4oe1xyXG4gICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3ZlbmRvcicsXHJcbiAgICAgICAgICAgIHJlY2lwaWVudDogJ2RldmljZScsXHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IENPTlRST0xfQ09NTUFORFMuU0VUX0JBVURESVYsXHJcbiAgICAgICAgICAgIGluZGV4OiAweDAwLFxyXG4gICAgICAgICAgICB2YWx1ZTogMHgwXHJcbiAgICAgICAgfSwgMSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgZ2V0TW9kZW1TdGF0ZSgpIHtcclxuICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy51c2IuY29udHJvbFRyYW5zZmVySW4oe1xyXG4gICAgICAgICAgICByZXF1ZXN0VHlwZTogJ3ZlbmRvcicsXHJcbiAgICAgICAgICAgIHJlY2lwaWVudDogJ2RldmljZScsXHJcbiAgICAgICAgICAgIHJlcXVlc3Q6IENPTlRST0xfQ09NTUFORFMuR0VUX01ETVNUUyxcclxuICAgICAgICAgICAgaW5kZXg6IDB4MDAsXHJcbiAgICAgICAgICAgIHZhbHVlOiAweDBcclxuICAgICAgICB9LCAxKTtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQuZGF0YS5nZXRJbnQ4KCk7XHJcbiAgICAgICAgaWYgKHJlc3VsdCAhPT0gdGhpcy5tb2RlbVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTW9kZW1TdGF0ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5tb2RlbVN0YXRlQ2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbVN0YXRlQ2hhbmdlZCh0aGlzLkRUUiwgdGhpcy5SVFMsIHRoaXMuQ1RTLCB0aGlzLkRTUiwgdGhpcy5SSSwgdGhpcy5EQ0QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGdldEZsb3dDb250cm9sKCkge1xyXG4gICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCB0aGlzLnVzYi5jb250cm9sVHJhbnNmZXJJbih7XHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAndmVuZG9yJyxcclxuICAgICAgICAgICAgcmVjaXBpZW50OiAnZGV2aWNlJyxcclxuICAgICAgICAgICAgcmVxdWVzdDogQ09OVFJPTF9DT01NQU5EUy5HRVRfRkxPVyxcclxuICAgICAgICAgICAgaW5kZXg6IDB4MDAsXHJcbiAgICAgICAgICAgIHZhbHVlOiAweDBcclxuICAgICAgICB9LCAxNik7XHJcbiAgICAgICAgdmFyIGFyciA9IG5ldyBJbnQzMkFycmF5KHJlc3VsdC5kYXRhLmJ1ZmZlcik7XHJcbiAgICAgICAgYXJyID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbShhcnIpKTtcclxuICAgICAgICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoRkxPV19DT05UUk9MKTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVudHJpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KGVudHJpZXNbaV1bMV0pID09PSBhcnIpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdldEZsb3dDb250cm9sQ2FsbGJhY2spIHRoaXMuZ2V0Rmxvd0NvbnRyb2xDYWxsYmFjayhlbnRyaWVzW2ldWzBdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzZXRGbG93Q29udHJvbCh2YWx1ZSkge1xyXG4gICAgICAgIGxldCBhcnIgPSBGTE9XX0NPTlRST0xbdmFsdWVdO1xyXG4gICAgICAgIGF3YWl0IHRoaXMudXNiLmNvbnRyb2xUcmFuc2Zlck91dCh7XHJcbiAgICAgICAgICAgIHJlcXVlc3RUeXBlOiAndmVuZG9yJyxcclxuICAgICAgICAgICAgcmVjaXBpZW50OiAnZGV2aWNlJyxcclxuICAgICAgICAgICAgcmVxdWVzdDogMHgxMyxcclxuICAgICAgICAgICAgaW5kZXg6IDB4MDAsXHJcbiAgICAgICAgICAgIHZhbHVlOiAweDBcclxuICAgICAgICB9LCBuZXcgSW50MzJBcnJheShhcnIpKTtcclxuICAgICAgICBpZiAodGhpcy5mbG93Q29udHJvbENoYW5nZWQpIHRoaXMuZmxvd0NvbnRyb2xDaGFuZ2VkKHZhbHVlKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyB3cml0ZShkYXRhKSB7XHJcbiAgICAgICAgdmFyIGEgPSBuZXcgVWludDhBcnJheSgpO1xyXG4gICAgICAgIHZhciBlbmMgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICAgICAgICBhID0gZW5jLmVuY29kZShkYXRhKTtcclxuICAgICAgICBpZiAoYS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNiLnRyYW5zZmVyT3V0KDIsIGEpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXJEYXRhU2VudCkgdGhpcy5zZXJEYXRhU2VudChkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdG9nZ2xlTElORShsaW5lKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRNSFMobGluZSBeIHRoaXMubW9kZW1TdGF0ZSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0xpbmUgdG9nZ2xlZCcpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHJlYWQoKSB7XHJcbiAgICAgICAgaWYgKGJ1ZmZlcmVkRGF0YSAhPT0gJycpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJEYXRhQXJyaXZhbChidWZmZXJlZERhdGEpO1xyXG4gICAgICAgICAgICBidWZmZXJlZERhdGEgPSAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYXV0b1JlYWQoKSB7XHJcbiAgICAgICAgY29uc3QgciA9IGF3YWl0IHRoaXMudXNiLnRyYW5zZmVySW4oMiwgNjQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheShyLmRhdGEuYnVmZmVyKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyByZWFkVGltZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FuUmVhZCAmJiB0aGlzLnVzYiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FuUmVhZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBhd2FpdCB0aGlzLmF1dG9SZWFkKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuY29kaW5nID09PSAnVVRGOCcpIHtkYXRhID0gREVDT0RFUi5kZWNvZGUoZGF0YSk7fVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVuY29kaW5nID09PSAnSEVYJykge2RhdGEgPSB0aGlzLmJ5dGVUb0hleFN0cmluZyhkYXRhKTt9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VyRGF0YUFycml2YWwgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvUmVhZERhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VyRGF0YUFycml2YWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJlZERhdGEgPSBidWZmZXJlZERhdGEgKyBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4Lm5hbWUgPT09ICdOb3RGb3VuZEVycm9yJyAmJiBleC5jb2RlID09PSA4ICYmIGV4Lm1lc3NhZ2UuaW5kZXhPZignZGlzY29ubmVjdGVkJykgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5kYXRhVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5tb2RlbVN0YXRlVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbm5lY3Rpb25FcnJvcikgdGhpcy5jb25uZWN0aW9uRXJyb3IoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNhblJlYWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBieXRlVG9IZXhTdHJpbmcodWludDhhcnIpIHtcclxuICAgICAgICBpZiAoIXVpbnQ4YXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGhleFN0ciA9ICcnO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdWludDhhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGhleCA9ICh1aW50OGFycltpXSAmIDB4ZmYpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICAgICAgaGV4ID0gKGhleC5sZW5ndGggPT09IDEpID8gJzAnICsgaGV4IDogaGV4O1xyXG4gICAgICAgICAgICBoZXhTdHIgKz0gaGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGV4U3RyLnRvVXBwZXJDYXNlKCk7XHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHsgU2VyaWFsLCBMSU5FX1NUQVRFUywgRkxPV19DT05UUk9MIH07XHJcbiIsImZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7XG4gIHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7XG4gICAgXCJkZWZhdWx0XCI6IG9ialxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQ7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuLy8gVGhpcyBtZXRob2Qgb2Ygb2J0YWluaW5nIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0IG5lZWRzIHRvIGJlXG4vLyBrZXB0IGlkZW50aWNhbCB0byB0aGUgd2F5IGl0IGlzIG9idGFpbmVkIGluIHJ1bnRpbWUuanNcbnZhciBnID0gKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpcyB9KSgpIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcblxuLy8gVXNlIGBnZXRPd25Qcm9wZXJ0eU5hbWVzYCBiZWNhdXNlIG5vdCBhbGwgYnJvd3NlcnMgc3VwcG9ydCBjYWxsaW5nXG4vLyBgaGFzT3duUHJvcGVydHlgIG9uIHRoZSBnbG9iYWwgYHNlbGZgIG9iamVjdCBpbiBhIHdvcmtlci4gU2VlICMxODMuXG52YXIgaGFkUnVudGltZSA9IGcucmVnZW5lcmF0b3JSdW50aW1lICYmXG4gIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGcpLmluZGV4T2YoXCJyZWdlbmVyYXRvclJ1bnRpbWVcIikgPj0gMDtcblxuLy8gU2F2ZSB0aGUgb2xkIHJlZ2VuZXJhdG9yUnVudGltZSBpbiBjYXNlIGl0IG5lZWRzIHRvIGJlIHJlc3RvcmVkIGxhdGVyLlxudmFyIG9sZFJ1bnRpbWUgPSBoYWRSdW50aW1lICYmIGcucmVnZW5lcmF0b3JSdW50aW1lO1xuXG4vLyBGb3JjZSByZWV2YWx1dGF0aW9uIG9mIHJ1bnRpbWUuanMuXG5nLnJlZ2VuZXJhdG9yUnVudGltZSA9IHVuZGVmaW5lZDtcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi9ydW50aW1lXCIpO1xuXG5pZiAoaGFkUnVudGltZSkge1xuICAvLyBSZXN0b3JlIHRoZSBvcmlnaW5hbCBydW50aW1lLlxuICBnLnJlZ2VuZXJhdG9yUnVudGltZSA9IG9sZFJ1bnRpbWU7XG59IGVsc2Uge1xuICAvLyBSZW1vdmUgdGhlIGdsb2JhbCBwcm9wZXJ0eSBhZGRlZCBieSBydW50aW1lLmpzLlxuICB0cnkge1xuICAgIGRlbGV0ZSBnLnJlZ2VuZXJhdG9yUnVudGltZTtcbiAgfSBjYXRjaChlKSB7XG4gICAgZy5yZWdlbmVyYXRvclJ1bnRpbWUgPSB1bmRlZmluZWQ7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuIShmdW5jdGlvbihnbG9iYWwpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICB2YXIgaW5Nb2R1bGUgPSB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiO1xuICB2YXIgcnVudGltZSA9IGdsb2JhbC5yZWdlbmVyYXRvclJ1bnRpbWU7XG4gIGlmIChydW50aW1lKSB7XG4gICAgaWYgKGluTW9kdWxlKSB7XG4gICAgICAvLyBJZiByZWdlbmVyYXRvclJ1bnRpbWUgaXMgZGVmaW5lZCBnbG9iYWxseSBhbmQgd2UncmUgaW4gYSBtb2R1bGUsXG4gICAgICAvLyBtYWtlIHRoZSBleHBvcnRzIG9iamVjdCBpZGVudGljYWwgdG8gcmVnZW5lcmF0b3JSdW50aW1lLlxuICAgICAgbW9kdWxlLmV4cG9ydHMgPSBydW50aW1lO1xuICAgIH1cbiAgICAvLyBEb24ndCBib3RoZXIgZXZhbHVhdGluZyB0aGUgcmVzdCBvZiB0aGlzIGZpbGUgaWYgdGhlIHJ1bnRpbWUgd2FzXG4gICAgLy8gYWxyZWFkeSBkZWZpbmVkIGdsb2JhbGx5LlxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIERlZmluZSB0aGUgcnVudGltZSBnbG9iYWxseSAoYXMgZXhwZWN0ZWQgYnkgZ2VuZXJhdGVkIGNvZGUpIGFzIGVpdGhlclxuICAvLyBtb2R1bGUuZXhwb3J0cyAoaWYgd2UncmUgaW4gYSBtb2R1bGUpIG9yIGEgbmV3LCBlbXB0eSBvYmplY3QuXG4gIHJ1bnRpbWUgPSBnbG9iYWwucmVnZW5lcmF0b3JSdW50aW1lID0gaW5Nb2R1bGUgPyBtb2R1bGUuZXhwb3J0cyA6IHt9O1xuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIHJ1bnRpbWUud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIEl0ZXJhdG9yUHJvdG90eXBlW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICB2YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gIHZhciBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSA9IGdldFByb3RvICYmIGdldFByb3RvKGdldFByb3RvKHZhbHVlcyhbXSkpKTtcbiAgaWYgKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlICYmXG4gICAgICBOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAhPT0gT3AgJiZcbiAgICAgIGhhc093bi5jYWxsKE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlLCBpdGVyYXRvclN5bWJvbCkpIHtcbiAgICAvLyBUaGlzIGVudmlyb25tZW50IGhhcyBhIG5hdGl2ZSAlSXRlcmF0b3JQcm90b3R5cGUlOyB1c2UgaXQgaW5zdGVhZFxuICAgIC8vIG9mIHRoZSBwb2x5ZmlsbC5cbiAgICBJdGVyYXRvclByb3RvdHlwZSA9IE5hdGl2ZUl0ZXJhdG9yUHJvdG90eXBlO1xuICB9XG5cbiAgdmFyIEdwID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUucHJvdG90eXBlID1cbiAgICBHZW5lcmF0b3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShJdGVyYXRvclByb3RvdHlwZSk7XG4gIEdlbmVyYXRvckZ1bmN0aW9uLnByb3RvdHlwZSA9IEdwLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR2VuZXJhdG9yRnVuY3Rpb247XG4gIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlW3RvU3RyaW5nVGFnU3ltYm9sXSA9XG4gICAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBcIkdlbmVyYXRvckZ1bmN0aW9uXCI7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgcHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcnVudGltZS5pc0dlbmVyYXRvckZ1bmN0aW9uID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgdmFyIGN0b3IgPSB0eXBlb2YgZ2VuRnVuID09PSBcImZ1bmN0aW9uXCIgJiYgZ2VuRnVuLmNvbnN0cnVjdG9yO1xuICAgIHJldHVybiBjdG9yXG4gICAgICA/IGN0b3IgPT09IEdlbmVyYXRvckZ1bmN0aW9uIHx8XG4gICAgICAgIC8vIEZvciB0aGUgbmF0aXZlIEdlbmVyYXRvckZ1bmN0aW9uIGNvbnN0cnVjdG9yLCB0aGUgYmVzdCB3ZSBjYW5cbiAgICAgICAgLy8gZG8gaXMgdG8gY2hlY2sgaXRzIC5uYW1lIHByb3BlcnR5LlxuICAgICAgICAoY3Rvci5kaXNwbGF5TmFtZSB8fCBjdG9yLm5hbWUpID09PSBcIkdlbmVyYXRvckZ1bmN0aW9uXCJcbiAgICAgIDogZmFsc2U7XG4gIH07XG5cbiAgcnVudGltZS5tYXJrID0gZnVuY3Rpb24oZ2VuRnVuKSB7XG4gICAgaWYgKE9iamVjdC5zZXRQcm90b3R5cGVPZikge1xuICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKGdlbkZ1biwgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBnZW5GdW4uX19wcm90b19fID0gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGU7XG4gICAgICBpZiAoISh0b1N0cmluZ1RhZ1N5bWJvbCBpbiBnZW5GdW4pKSB7XG4gICAgICAgIGdlbkZ1blt0b1N0cmluZ1RhZ1N5bWJvbF0gPSBcIkdlbmVyYXRvckZ1bmN0aW9uXCI7XG4gICAgICB9XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIHJ1bnRpbWUuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGludm9rZShtZXRob2QsIGFyZywgcmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2goZ2VuZXJhdG9yW21ldGhvZF0sIGdlbmVyYXRvciwgYXJnKTtcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIHJlamVjdChyZWNvcmQuYXJnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSByZWNvcmQuYXJnO1xuICAgICAgICB2YXIgdmFsdWUgPSByZXN1bHQudmFsdWU7XG4gICAgICAgIGlmICh2YWx1ZSAmJlxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICBoYXNPd24uY2FsbCh2YWx1ZSwgXCJfX2F3YWl0XCIpKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZS5fX2F3YWl0KS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJuZXh0XCIsIHZhbHVlLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgaW52b2tlKFwidGhyb3dcIiwgZXJyLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLiBJZiB0aGUgUHJvbWlzZSBpcyByZWplY3RlZCwgaG93ZXZlciwgdGhlXG4gICAgICAgICAgLy8gcmVzdWx0IGZvciB0aGlzIGl0ZXJhdGlvbiB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIHNhbWVcbiAgICAgICAgICAvLyByZWFzb24uIE5vdGUgdGhhdCByZWplY3Rpb25zIG9mIHlpZWxkZWQgUHJvbWlzZXMgYXJlIG5vdFxuICAgICAgICAgIC8vIHRocm93biBiYWNrIGludG8gdGhlIGdlbmVyYXRvciBmdW5jdGlvbiwgYXMgaXMgdGhlIGNhc2VcbiAgICAgICAgICAvLyB3aGVuIGFuIGF3YWl0ZWQgUHJvbWlzZSBpcyByZWplY3RlZC4gVGhpcyBkaWZmZXJlbmNlIGluXG4gICAgICAgICAgLy8gYmVoYXZpb3IgYmV0d2VlbiB5aWVsZCBhbmQgYXdhaXQgaXMgaW1wb3J0YW50LCBiZWNhdXNlIGl0XG4gICAgICAgICAgLy8gYWxsb3dzIHRoZSBjb25zdW1lciB0byBkZWNpZGUgd2hhdCB0byBkbyB3aXRoIHRoZSB5aWVsZGVkXG4gICAgICAgICAgLy8gcmVqZWN0aW9uIChzd2FsbG93IGl0IGFuZCBjb250aW51ZSwgbWFudWFsbHkgLnRocm93IGl0IGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBnZW5lcmF0b3IsIGFiYW5kb24gaXRlcmF0aW9uLCB3aGF0ZXZlcikuIFdpdGhcbiAgICAgICAgICAvLyBhd2FpdCwgYnkgY29udHJhc3QsIHRoZXJlIGlzIG5vIG9wcG9ydHVuaXR5IHRvIGV4YW1pbmUgdGhlXG4gICAgICAgICAgLy8gcmVqZWN0aW9uIHJlYXNvbiBvdXRzaWRlIHRoZSBnZW5lcmF0b3IgZnVuY3Rpb24sIHNvIHRoZVxuICAgICAgICAgIC8vIG9ubHkgb3B0aW9uIGlzIHRvIHRocm93IGl0IGZyb20gdGhlIGF3YWl0IGV4cHJlc3Npb24sIGFuZFxuICAgICAgICAgIC8vIGxldCB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIGhhbmRsZSB0aGUgZXhjZXB0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIHJlamVjdCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHByZXZpb3VzUHJvbWlzZTtcblxuICAgIGZ1bmN0aW9uIGVucXVldWUobWV0aG9kLCBhcmcpIHtcbiAgICAgIGZ1bmN0aW9uIGNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBBc3luY0l0ZXJhdG9yLnByb3RvdHlwZVthc3luY0l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcbiAgcnVudGltZS5Bc3luY0l0ZXJhdG9yID0gQXN5bmNJdGVyYXRvcjtcblxuICAvLyBOb3RlIHRoYXQgc2ltcGxlIGFzeW5jIGZ1bmN0aW9ucyBhcmUgaW1wbGVtZW50ZWQgb24gdG9wIG9mXG4gIC8vIEFzeW5jSXRlcmF0b3Igb2JqZWN0czsgdGhleSBqdXN0IHJldHVybiBhIFByb21pc2UgZm9yIHRoZSB2YWx1ZSBvZlxuICAvLyB0aGUgZmluYWwgcmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBpdGVyYXRvci5cbiAgcnVudGltZS5hc3luYyA9IGZ1bmN0aW9uKGlubmVyRm4sIG91dGVyRm4sIHNlbGYsIHRyeUxvY3NMaXN0KSB7XG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpXG4gICAgKTtcblxuICAgIHJldHVybiBydW50aW1lLmlzR2VuZXJhdG9yRnVuY3Rpb24ob3V0ZXJGbilcbiAgICAgID8gaXRlciAvLyBJZiBvdXRlckZuIGlzIGEgZ2VuZXJhdG9yLCByZXR1cm4gdGhlIGZ1bGwgaXRlcmF0b3IuXG4gICAgICA6IGl0ZXIubmV4dCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdC5kb25lID8gcmVzdWx0LnZhbHVlIDogaXRlci5uZXh0KCk7XG4gICAgICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCkge1xuICAgIHZhciBzdGF0ZSA9IEdlblN0YXRlU3VzcGVuZGVkU3RhcnQ7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gaW52b2tlKG1ldGhvZCwgYXJnKSB7XG4gICAgICBpZiAoc3RhdGUgPT09IEdlblN0YXRlRXhlY3V0aW5nKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IHJ1bm5pbmdcIik7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVDb21wbGV0ZWQpIHtcbiAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgdGhyb3cgYXJnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmUgZm9yZ2l2aW5nLCBwZXIgMjUuMy4zLjMuMyBvZiB0aGUgc3BlYzpcbiAgICAgICAgLy8gaHR0cHM6Ly9wZW9wbGUubW96aWxsYS5vcmcvfmpvcmVuZG9yZmYvZXM2LWRyYWZ0Lmh0bWwjc2VjLWdlbmVyYXRvcnJlc3VtZVxuICAgICAgICByZXR1cm4gZG9uZVJlc3VsdCgpO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IG1ldGhvZDtcbiAgICAgIGNvbnRleHQuYXJnID0gYXJnO1xuXG4gICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgZGVsZWdhdGUgPSBjb250ZXh0LmRlbGVnYXRlO1xuICAgICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgICB2YXIgZGVsZWdhdGVSZXN1bHQgPSBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KTtcbiAgICAgICAgICBpZiAoZGVsZWdhdGVSZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCA9PT0gQ29udGludWVTZW50aW5lbCkgY29udGludWU7XG4gICAgICAgICAgICByZXR1cm4gZGVsZWdhdGVSZXN1bHQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcIm5leHRcIikge1xuICAgICAgICAgIC8vIFNldHRpbmcgY29udGV4dC5fc2VudCBmb3IgbGVnYWN5IHN1cHBvcnQgb2YgQmFiZWwnc1xuICAgICAgICAgIC8vIGZ1bmN0aW9uLnNlbnQgaW1wbGVtZW50YXRpb24uXG4gICAgICAgICAgY29udGV4dC5zZW50ID0gY29udGV4dC5fc2VudCA9IGNvbnRleHQuYXJnO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydCkge1xuICAgICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAgIHRocm93IGNvbnRleHQuYXJnO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnRleHQuZGlzcGF0Y2hFeGNlcHRpb24oY29udGV4dC5hcmcpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY29udGV4dC5tZXRob2QgPT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgICBjb250ZXh0LmFicnVwdChcInJldHVyblwiLCBjb250ZXh0LmFyZyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZSA9IEdlblN0YXRlRXhlY3V0aW5nO1xuXG4gICAgICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChpbm5lckZuLCBzZWxmLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcIm5vcm1hbFwiKSB7XG4gICAgICAgICAgLy8gSWYgYW4gZXhjZXB0aW9uIGlzIHRocm93biBmcm9tIGlubmVyRm4sIHdlIGxlYXZlIHN0YXRlID09PVxuICAgICAgICAgIC8vIEdlblN0YXRlRXhlY3V0aW5nIGFuZCBsb29wIGJhY2sgZm9yIGFub3RoZXIgaW52b2NhdGlvbi5cbiAgICAgICAgICBzdGF0ZSA9IGNvbnRleHQuZG9uZVxuICAgICAgICAgICAgPyBHZW5TdGF0ZUNvbXBsZXRlZFxuICAgICAgICAgICAgOiBHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkO1xuXG4gICAgICAgICAgaWYgKHJlY29yZC5hcmcgPT09IENvbnRpbnVlU2VudGluZWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB2YWx1ZTogcmVjb3JkLmFyZyxcbiAgICAgICAgICAgIGRvbmU6IGNvbnRleHQuZG9uZVxuICAgICAgICAgIH07XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgc3RhdGUgPSBHZW5TdGF0ZUNvbXBsZXRlZDtcbiAgICAgICAgICAvLyBEaXNwYXRjaCB0aGUgZXhjZXB0aW9uIGJ5IGxvb3BpbmcgYmFjayBhcm91bmQgdG8gdGhlXG4gICAgICAgICAgLy8gY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZykgY2FsbCBhYm92ZS5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBkZWxlZ2F0ZS5pdGVyYXRvcltjb250ZXh0Lm1ldGhvZF0oY29udGV4dC5hcmcpIGFuZCBoYW5kbGUgdGhlXG4gIC8vIHJlc3VsdCwgZWl0aGVyIGJ5IHJldHVybmluZyBhIHsgdmFsdWUsIGRvbmUgfSByZXN1bHQgZnJvbSB0aGVcbiAgLy8gZGVsZWdhdGUgaXRlcmF0b3IsIG9yIGJ5IG1vZGlmeWluZyBjb250ZXh0Lm1ldGhvZCBhbmQgY29udGV4dC5hcmcsXG4gIC8vIHNldHRpbmcgY29udGV4dC5kZWxlZ2F0ZSB0byBudWxsLCBhbmQgcmV0dXJuaW5nIHRoZSBDb250aW51ZVNlbnRpbmVsLlxuICBmdW5jdGlvbiBtYXliZUludm9rZURlbGVnYXRlKGRlbGVnYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIG1ldGhvZCA9IGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXTtcbiAgICBpZiAobWV0aG9kID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIEEgLnRocm93IG9yIC5yZXR1cm4gd2hlbiB0aGUgZGVsZWdhdGUgaXRlcmF0b3IgaGFzIG5vIC50aHJvd1xuICAgICAgLy8gbWV0aG9kIGFsd2F5cyB0ZXJtaW5hdGVzIHRoZSB5aWVsZCogbG9vcC5cbiAgICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICBpZiAoZGVsZWdhdGUuaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGhhcyBhIHJldHVybiBtZXRob2QsIGdpdmUgaXQgYVxuICAgICAgICAgIC8vIGNoYW5jZSB0byBjbGVhbiB1cC5cbiAgICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwicmV0dXJuXCI7XG4gICAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbWF5YmVJbnZva2VEZWxlZ2F0ZShkZWxlZ2F0ZSwgY29udGV4dCk7XG5cbiAgICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgLy8gSWYgbWF5YmVJbnZva2VEZWxlZ2F0ZShjb250ZXh0KSBjaGFuZ2VkIGNvbnRleHQubWV0aG9kIGZyb21cbiAgICAgICAgICAgIC8vIFwicmV0dXJuXCIgdG8gXCJ0aHJvd1wiLCBsZXQgdGhhdCBvdmVycmlkZSB0aGUgVHlwZUVycm9yIGJlbG93LlxuICAgICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICBcIlRoZSBpdGVyYXRvciBkb2VzIG5vdCBwcm92aWRlIGEgJ3Rocm93JyBtZXRob2RcIik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciByZWNvcmQgPSB0cnlDYXRjaChtZXRob2QsIGRlbGVnYXRlLml0ZXJhdG9yLCBjb250ZXh0LmFyZyk7XG5cbiAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgY29udGV4dC5tZXRob2QgPSBcInRocm93XCI7XG4gICAgICBjb250ZXh0LmFyZyA9IHJlY29yZC5hcmc7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIHZhciBpbmZvID0gcmVjb3JkLmFyZztcblxuICAgIGlmICghIGluZm8pIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSBuZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIik7XG4gICAgICBjb250ZXh0LmRlbGVnYXRlID0gbnVsbDtcbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cblxuICAgIGlmIChpbmZvLmRvbmUpIHtcbiAgICAgIC8vIEFzc2lnbiB0aGUgcmVzdWx0IG9mIHRoZSBmaW5pc2hlZCBkZWxlZ2F0ZSB0byB0aGUgdGVtcG9yYXJ5XG4gICAgICAvLyB2YXJpYWJsZSBzcGVjaWZpZWQgYnkgZGVsZWdhdGUucmVzdWx0TmFtZSAoc2VlIGRlbGVnYXRlWWllbGQpLlxuICAgICAgY29udGV4dFtkZWxlZ2F0ZS5yZXN1bHROYW1lXSA9IGluZm8udmFsdWU7XG5cbiAgICAgIC8vIFJlc3VtZSBleGVjdXRpb24gYXQgdGhlIGRlc2lyZWQgbG9jYXRpb24gKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHQubmV4dCA9IGRlbGVnYXRlLm5leHRMb2M7XG5cbiAgICAgIC8vIElmIGNvbnRleHQubWV0aG9kIHdhcyBcInRocm93XCIgYnV0IHRoZSBkZWxlZ2F0ZSBoYW5kbGVkIHRoZVxuICAgICAgLy8gZXhjZXB0aW9uLCBsZXQgdGhlIG91dGVyIGdlbmVyYXRvciBwcm9jZWVkIG5vcm1hbGx5LiBJZlxuICAgICAgLy8gY29udGV4dC5tZXRob2Qgd2FzIFwibmV4dFwiLCBmb3JnZXQgY29udGV4dC5hcmcgc2luY2UgaXQgaGFzIGJlZW5cbiAgICAgIC8vIFwiY29uc3VtZWRcIiBieSB0aGUgZGVsZWdhdGUgaXRlcmF0b3IuIElmIGNvbnRleHQubWV0aG9kIHdhc1xuICAgICAgLy8gXCJyZXR1cm5cIiwgYWxsb3cgdGhlIG9yaWdpbmFsIC5yZXR1cm4gY2FsbCB0byBjb250aW51ZSBpbiB0aGVcbiAgICAgIC8vIG91dGVyIGdlbmVyYXRvci5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCAhPT0gXCJyZXR1cm5cIikge1xuICAgICAgICBjb250ZXh0Lm1ldGhvZCA9IFwibmV4dFwiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZS15aWVsZCB0aGUgcmVzdWx0IHJldHVybmVkIGJ5IHRoZSBkZWxlZ2F0ZSBtZXRob2QuXG4gICAgICByZXR1cm4gaW5mbztcbiAgICB9XG5cbiAgICAvLyBUaGUgZGVsZWdhdGUgaXRlcmF0b3IgaXMgZmluaXNoZWQsIHNvIGZvcmdldCBpdCBhbmQgY29udGludWUgd2l0aFxuICAgIC8vIHRoZSBvdXRlciBnZW5lcmF0b3IuXG4gICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gIH1cblxuICAvLyBEZWZpbmUgR2VuZXJhdG9yLnByb3RvdHlwZS57bmV4dCx0aHJvdyxyZXR1cm59IGluIHRlcm1zIG9mIHRoZVxuICAvLyB1bmlmaWVkIC5faW52b2tlIGhlbHBlciBtZXRob2QuXG4gIGRlZmluZUl0ZXJhdG9yTWV0aG9kcyhHcCk7XG5cbiAgR3BbdG9TdHJpbmdUYWdTeW1ib2xdID0gXCJHZW5lcmF0b3JcIjtcblxuICAvLyBBIEdlbmVyYXRvciBzaG91bGQgYWx3YXlzIHJldHVybiBpdHNlbGYgYXMgdGhlIGl0ZXJhdG9yIG9iamVjdCB3aGVuIHRoZVxuICAvLyBAQGl0ZXJhdG9yIGZ1bmN0aW9uIGlzIGNhbGxlZCBvbiBpdC4gU29tZSBicm93c2VycycgaW1wbGVtZW50YXRpb25zIG9mIHRoZVxuICAvLyBpdGVyYXRvciBwcm90b3R5cGUgY2hhaW4gaW5jb3JyZWN0bHkgaW1wbGVtZW50IHRoaXMsIGNhdXNpbmcgdGhlIEdlbmVyYXRvclxuICAvLyBvYmplY3QgdG8gbm90IGJlIHJldHVybmVkIGZyb20gdGhpcyBjYWxsLiBUaGlzIGVuc3VyZXMgdGhhdCBkb2Vzbid0IGhhcHBlbi5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWdlbmVyYXRvci9pc3N1ZXMvMjc0IGZvciBtb3JlIGRldGFpbHMuXG4gIEdwW2l0ZXJhdG9yU3ltYm9sXSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIEdwLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBHZW5lcmF0b3JdXCI7XG4gIH07XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBydW50aW1lLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgcnVudGltZS52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcbn0pKFxuICAvLyBJbiBzbG9wcHkgbW9kZSwgdW5ib3VuZCBgdGhpc2AgcmVmZXJzIHRvIHRoZSBnbG9iYWwgb2JqZWN0LCBmYWxsYmFjayB0b1xuICAvLyBGdW5jdGlvbiBjb25zdHJ1Y3RvciBpZiB3ZSdyZSBpbiBnbG9iYWwgc3RyaWN0IG1vZGUuIFRoYXQgaXMgc2FkbHkgYSBmb3JtXG4gIC8vIG9mIGluZGlyZWN0IGV2YWwgd2hpY2ggdmlvbGF0ZXMgQ29udGVudCBTZWN1cml0eSBQb2xpY3kuXG4gIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXMgfSkoKSB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKClcbik7XG4iLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfYXN5bmNUb0dlbmVyYXRvcjsiLCJmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IF9jbGFzc0NhbGxDaGVjazsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICByZXR1cm4gQ29uc3RydWN0b3I7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2NyZWF0ZUNsYXNzOyJdLCJzb3VyY2VSb290IjoiIn0=